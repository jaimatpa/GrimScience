import{_ as ht,a as xt}from"./BzVEqXPg.js";import{d as Ne,j as Ee,r as I,m as Ve,o as H,c as ee,h as t,f as o,g as e,p as de,w as p,v as Ue,z as S,x as Oe,F as Ae,q as je,s as Be,c9 as gt,bW as Z,i as kt,a as wt,k as It,V as Re,e as Qe,y as Ke,E as Dt}from"./RPcYXXev.js";import{f as ye,_ as Le,a as Fe}from"./CZ9EiQCe.js";import{_ as ze,a as Ge,b as tt}from"./Crp9aCmO.js";import{_ as Ct}from"./yGFOaDKw.js";import{a as lt,b as Ye,_ as Vt}from"./Be2iH8Rx.js";import{_ as st}from"./BQUlXvKt.js";import{_ as Ut}from"./lE0Kizl1.js";import{_ as Ot}from"./DHKz6DHT.js";import{_ as St}from"./CtWjGfD-.js";import{_ as Et}from"./N6g2mK6h.js";import{_ as ot}from"./C1sp2X5w.js";import{_ as He}from"./D923ZLaS.js";import{_ as Pt}from"./OsgMrgDf.js";import{L as at,u as $}from"./BqkbertX.js";const $t=je(Le),Mt={class:"vl-parent"},Tt={class:"flex flex-col"},Rt={class:"flex justify-between bg-slate-400 px-3 py-1"},qt=t("div",{class:"flex items-center"}," Inventory transactions ",-1),Nt={class:"flex flex-row space-x-5"},At={class:"flex flex-row space-x-3"},jt=t("div",{class:"flex items-center"},"Stock# Search",-1),Bt={class:"min-w-[150px]"},Lt={class:"py-2"},Ft={class:"px-4"},zt={key:0,class:"px-1 py-1"},Gt={key:1,class:"flex justify-center text-center w-[53px]"},Yt={class:"w-[50px]"},Ht=t("div",{class:"flex items-center bg-slate-400 px-3 py-1 mt-2"}," Parts Used ",-1),Jt={class:"flex flex-row-reverse px-4 py-1"},Wt={class:"min-w-[100px]"},Qt={class:"flex flex-row space-x-3 p-4 pt-0"},Kt={class:"basis-1/2"},Zt={key:0,class:"px-1 py-1"},Xt={key:1,class:"px-1 py-1 min-w-[120px]"},el={class:"w-[50px]"},tl={class:"basis-1/2"},ll={key:0,class:"px-1 py-1"},sl={key:1,class:"flex justify-center text-center w-[53px]"},ol={class:"w-[50px]"},al={class:"flex flex-row"},nl=t("div",{class:"basis-1/2 p-4 pt-0"},[t("div",{class:"italic"}," Parts(Double-Clcick To Add) ")],-1),il={class:"basis-1/2 p-4 pt-0 flex flex-row space-x-3"},rl={class:"basis-1/4 flex justify-center"},dl={class:"basis-1/4 flex flex-col space-y-3"},ul={class:"basis-1/2"},cl={class:"flex justify-between gap-3 px-8"},pl={class:"flex flex-row space-x-5"},ml={class:"flex flex-row space-x-5"},fl=t("div",{class:"flex items-center"},"Onhand Count: ",-1),vl={class:"flex-1 mr-4"},bl={class:"flex flex-row-reverse mt-2"},yl={class:"min-w-[60px]"},_l={class:"min-w-[60px] mr-3"},we="i-heroicons-bars-arrow-up-20-solid",Ie="i-heroicons-bars-arrow-down-20-solid",De="i-heroicons-arrows-up-down-20-solid",hl=Ne({__name:"InventoryTransactions",props:{selectedOrder:{type:[Number,String,null]}},emits:["close","save"],setup(b,{emit:i}){const u=i,n=Ee(),y=I(!1),_=Ve({transactionID:null,By:null,Dated:null,Justification:null}),r=I({Dated:null,By:null,uniqueid:null,JobID:null,COMPLAINTNUMBER:null,ServiceReportID:null,InvoiceID:null,PONumber:null,VendorInvoiceID:null}),U=I({PARTTYPE:null,SUBCATEGORY:null,MODEL:null,DESCRIPTION:null}),v=I({MODEL:null}),l=I({defaultColumns:[{key:"Dated",label:"Date",filterable:!0},{key:"By",label:"By",filterable:!0},{key:"uniqueid",label:"#",filterable:!0},{key:"type",label:"Type"},{key:"JobID",label:"Job#",filterable:!0},{key:"COMPLAINTNUMBER",label:"Complaint#",filterable:!0},{key:"ServiceReportID",label:"Service Report#",filterable:!0},{key:"InvoiceID",label:"Invoice#",filterable:!0},{key:"PONumber",label:"PO#",filterable:!0},{key:"VendorInvoiceID",label:"Vendor Invoice#",filterable:!0}],sort:{column:"UniqueID",direction:"asc"},inventories:[],selectedInventory:null,isLoading:!1}),h=I({defaultColumns:[{key:"PARTTYPE",label:"Category",filterable:!0,filterOptions:[]},{key:"SUBCATEGORY",label:"Sub Category",filterable:!0,filterOptions:[]},{key:"MODEL",label:"Stock#",filterable:!0},{key:"DESCRIPTION",label:"Description",filterable:!0},{key:"OnHand",label:"Current On Hand"}],sort:{column:"UniqueID",direction:"asc"},products:[],selectedProduct:null,isLoading:!1}),x=I({defaultColumns:[{key:"MODEL",label:"Stock#",filterable:!0},{key:"DESCRIPTION",label:"Desc."},{key:"UNIT",label:"Inv.Unit"},{key:"QtyChange",label:"Adjustment"},{key:"OnHand",label:"Hand Count"}],sort:{column:"UniqueID",direction:"asc"},details:[],selectedDetail:null,isLoading:!1}),R=I(!1),M=I(0),j=async()=>{y.value=!0,await T(),await C(),await E(),y.value=!1},T=async()=>{await $("/api/materials/inventorytransactions",{method:"GET",params:{...r.value},onResponse({response:f}){f.status===200&&(l.value.inventories=f._data.body)}})},C=async()=>{await $("/api/materials/parts",{method:"GET",params:{...U.value},onResponse({response:f}){f.status===200&&(h.value.products=f._data.body)}}),await $("/api/materials/categories",{method:"GET",params:{partflag:1},onResponse({response:f}){f.status===200&&h.value.defaultColumns.forEach(m=>{m.key==="PARTTYPE"&&(m.filterOptions=[null,...f._data.body])})}}),await $("/api/materials/subcategories",{method:"GET",params:{category:U.value.PARTTYPE,partflag:1},onResponse({response:f}){f.status===200&&h.value.defaultColumns.forEach(m=>{m.key==="SUBCATEGORY"&&(m.filterOptions=[null,...f._data.body])})}})},E=async()=>{l.value.selectedInventory&&await $(`/api/materials/inventorytransactions/${l.value.selectedInventory.uniqueid}`,{method:"GET",params:{...v.value},onResponse({response:f}){f.status===200&&(x.value.details=f._data.body)}})},oe=async f=>{l.value.selectedInventory=f,l.value.inventories.forEach(m=>{m.uniqueid===f.uniqueid?m.class="bg-gray-200":delete m.class}),_.transactionID=f.uniqueid,_.By=f.By,_.Dated=new Date(f.Dated),_.Justification=f.Justification,E()},G=async()=>{l.value.selectedInventory},B=async f=>{h.value.selectedProduct=f},te=async()=>{l.value.selectedInventory?(R.value=!0,M.value=h.value.selectedProduct.OnHand):n.add({title:"",description:"Select inventory transaction.",icon:"i-heroicons-exclamation-triangle",color:"yellow"})},he=async f=>{JSON.stringify({...x.value.selectedDetail,class:""})===JSON.stringify({...f,class:""})?x.value.selectedDetail=null:x.value.selectedDetail={...f,class:""},x.value.details.forEach(m=>{m.uniqueID===f.uniqueID&&f.class!="bg-gray-200"?m.class="bg-gray-200":delete m.class})},ue=async f=>{for(const m of l.value.defaultColumns)if(m.sortable)if(m.key===f)switch(m.sortDirection){case"none":m.sortDirection="asc",l.value.sort.column=f,l.value.sort.direction="asc";break;case"asc":m.sortDirection="desc",l.value.sort.column=f,l.value.sort.direction="desc";break;default:m.sortDirection="none",l.value.sort.column="UniqueID",l.value.sort.direction="asc";break}else m.sortDirection="none";T()},le=async(f,m)=>{r.value.hasOwnProperty(m)?r.value[m]=f:console.error(`Filter does not have property: ${m}`),T()},L=async f=>{for(const m of h.value.defaultColumns)if(m.sortable)if(m.key===f)switch(m.sortDirection){case"none":m.sortDirection="asc",h.value.sort.column=f,h.value.sort.direction="asc";break;case"asc":m.sortDirection="desc",h.value.sort.column=f,h.value.sort.direction="desc";break;default:m.sortDirection="none",h.value.sort.column="UniqueID",h.value.sort.direction="asc";break}else m.sortDirection="none";C()},N=async(f,m)=>{U.value.hasOwnProperty(m)?U.value[m]=f:console.error(`Filter does not have property: ${m}`),C()},D=async f=>{for(const m of h.value.defaultColumns)if(m.sortable)if(m.key===f)switch(m.sortDirection){case"none":m.sortDirection="asc",h.value.sort.column=f,h.value.sort.direction="asc";break;case"asc":m.sortDirection="desc",h.value.sort.column=f,h.value.sort.direction="desc";break;default:m.sortDirection="none",h.value.sort.column="UniqueID",h.value.sort.direction="asc";break}else m.sortDirection="none";E()},k=async(f,m)=>{v.value.hasOwnProperty(m)?v.value[m]=f:console.error(`Filter does not have property: ${m}`),E()},J=f=>{l.value.selectedInventory=f},F=async f=>{},ie=async()=>{await $("/api/materials/inventorytransactions/detail",{method:"POST",body:{inventoryid:l.value.selectedInventory.uniqueid,onhand:M.value,bpid:h.value.selectedProduct.UniqueID},onResponse({response:f}){f.status===200&&E()}}),R.value=!1,M.value=0},re=async()=>{x.value.selectedDetail?await $(`/api/materials/inventorytransactions/detail/${x.value.selectedDetail.uniqueID}`,{method:"DELETE",onResponse({response:f}){f.status===200&&E()}}):n.add({title:"",description:"Select item to delete.",icon:"i-heroicons-exclamation-triangle",color:"yellow"})},se=async()=>{l.value.selectedInventory?await $(`/api/materials/inventorytransactions/${l.value.selectedInventory.uniqueid}`,{method:"DELETE",onResponse({response:f}){f.status===200&&(l.value.selectedInventory=null,T(),_.transactionID=null,_.By=null,_.Dated=null,_.Justification=null,n.add({title:"",description:f._data.message,icon:"i-heroicons-trash",color:"green"}))}}):n.add({title:"",description:"Select item to delete.",icon:"i-heroicons-exclamation-triangle",color:"yellow"})},ce=async()=>{l.value.selectedInventory?await $(`/api/materials/inventorytransactions/${l.value.selectedInventory.uniqueid}`,{method:"PUT",body:{..._},async onResponse({response:f}){f.status===200&&(await T(),l.value.inventories.forEach(m=>{m.uniqueid===l.value.selectedInventory.uniqueid?m.class="bg-gray-200":delete m.class}),n.add({title:"",description:f._data.message,icon:"i-heroicons-trash",color:"green"}))}}):n.add({title:"",description:"Select item to save.",icon:"i-heroicons-exclamation-triangle",color:"yellow"})},pe=()=>{l.value.selectedInventory=null,x.value.details=[],_.transactionID=null,_.By=null,_.Dated=null,_.Justification=null,l.value.inventories.forEach(f=>{delete f.class})},me=f=>{const m=[];return f.fname||m.push({path:"fname",message:"Please enter your frist name."}),f.lname||m.push({path:"lname",message:"Please enter a your last name."}),f.email||m.push({path:"email",message:"Please enter an email."}),m};async function fe(f){u("save",f.data)}return j(),(f,m)=>{const Q=ze,A=Be,O=lt,q=st,W=Ye,V=Pt,Y=Ge,Pe=$t,ge=Fe,ke=ot,$e=tt,Me=He;return H(),ee(Ae,null,[t("div",Mt,[o(e(at),{active:e(y),"onUpdate:active":m[0]||(m[0]=d=>de(y)?y.value=d:null),"is-full-page":!0,color:"#000000",backgroundColor:"#1B2533",loader:"dots"},null,8,["active"])]),o($e,{validate:me,"validate-on":["submit"],state:e(_),onSubmit:fe},{default:p(()=>[t("div",Tt,[t("div",Rt,[qt,t("div",Nt,[t("div",At,[jt,t("div",Bt,[o(Q,{modelValue:e(r).uniqueid,"onUpdate:modelValue":m[1]||(m[1]=d=>e(r).uniqueid=d)},null,8,["modelValue"])])]),t("div",null,[o(A,{label:"Refresh List",color:"gray"})])])]),t("div",Lt,[t("div",Ft,[o(W,{rows:e(l).inventories,columns:e(l).defaultColumns,loading:e(l).isLoading,class:"w-full",ui:{wrapper:"overflow-auto h-60 border-2 border-gray-300 dark:border-gray-700",divide:"divide-gray-200 dark:divide-gray-800",tr:{active:"hover:bg-gray-200 dark:hover:bg-gray-800/50"},th:{base:"sticky top-0 z-10",color:"bg-white dark:text-gray dark:bg-[#111827]",padding:"p-0"},td:{base:"h-[31px]",padding:"py-0"}},"empty-state":{icon:"i-heroicons-circle-stack-20-solid",label:"No items."},onSelect:oe,onDblclick:G},Ue({"UniqueID-data":p(({row:d})=>[t("div",Yt,S(d.UniqueID),1)]),"edit-data":p(({row:d})=>[o(q,{text:"Detail",class:"flex justify-center"},{default:p(()=>[o(A,{color:"gray",variant:"ghost",icon:"i-heroicons-pencil-square",onClick:ae=>J(d)},null,8,["onClick"])]),_:2},1024)]),"delete-data":p(({row:d})=>[o(q,{text:"Delete",class:"flex justify-center"},{default:p(()=>[o(A,{color:"gray",variant:"ghost",icon:"i-heroicons-trash",onClick:ae=>F(d)},null,8,["onClick"])]),_:2},1024)]),_:2},[Oe(e(l).defaultColumns,d=>({name:`${d.key}-header`,fn:p(()=>[d.kind!=="actions"?(H(),ee("div",zt,[o(O,{onHandleSortingButton:ue,onHandleInputChange:le,label:d.label,sortable:d.sortable,"sort-key":d.key,"sort-icon":(d==null?void 0:d.sortDirection)==="none"?De:(d==null?void 0:d.sortDirection)==="asc"?we:Ie,filterable:d.filterable,"filter-key":d.key},null,8,["label","sortable","sort-key","sort-icon","filterable","filter-key"])])):(H(),ee("div",Gt,S(d.label),1))])}))]),1032,["rows","columns","loading"])]),Ht,t("div",Jt,[t("div",Wt,[o(A,{label:"Remove Part",ui:{base:"min-w-[125px] justify-center"},onClick:re})])]),t("div",Qt,[t("div",Kt,[o(W,{rows:e(h).products,columns:e(h).defaultColumns,loading:e(h).isLoading,class:"w-full",ui:{wrapper:"overflow-y-auto h-60 border-2 border-gray-300 dark:border-gray-700",divide:"divide-gray-200 dark:divide-gray-800",th:{base:"sticky top-0 z-10",color:"bg-white dark:text-gray dark:bg-[#111827]",padding:"p-0"},td:{base:"h-[31px]",padding:"py-0"}},"empty-state":{icon:"i-heroicons-circle-stack-20-solid",label:"No items."},onSelect:B,onDblclick:te},Ue({"UniqueID-data":p(({row:d})=>[t("div",el,S(d.UniqueID),1)]),"edit-data":p(({row:d})=>[o(q,{text:"Detail",class:"flex justify-center"},{default:p(()=>[o(A,{color:"gray",variant:"ghost",icon:"i-heroicons-pencil-square",onClick:ae=>J(d)},null,8,["onClick"])]),_:2},1024)]),"delete-data":p(({row:d})=>[o(q,{text:"Delete",class:"flex justify-center"},{default:p(()=>[o(A,{color:"gray",variant:"ghost",icon:"i-heroicons-trash",onClick:ae=>F(d)},null,8,["onClick"])]),_:2},1024)]),_:2},[Oe(e(h).defaultColumns,d=>({name:`${d.key}-header`,fn:p(()=>[d.filterOptions?(H(),ee("div",Xt,[o(V,{onHandleSortingButton:L,onHandleSelectChange:N,label:d.label,sortable:d.sortable,"sort-key":d.key,"sort-icon":(d==null?void 0:d.sortDirection)==="none"?De:(d==null?void 0:d.sortDirection)==="asc"?we:Ie,value:e(U)[d.key],filterable:d.filterable,"filter-key":d.key,"filter-options":d.filterOptions},null,8,["label","sortable","sort-key","sort-icon","value","filterable","filter-key","filter-options"])])):(H(),ee("div",Zt,[o(O,{onHandleSortingButton:L,onHandleInputChange:N,label:d.label,sortable:d.sortable,"sort-key":d.key,"sort-icon":(d==null?void 0:d.sortDirection)==="none"?De:(d==null?void 0:d.sortDirection)==="asc"?we:Ie,filterable:d.filterable,"filter-key":d.key},null,8,["label","sortable","sort-key","sort-icon","filterable","filter-key"])]))])}))]),1032,["rows","columns","loading"])]),t("div",tl,[o(W,{rows:e(x).details,columns:e(x).defaultColumns,loading:e(x).isLoading,class:"w-full",ui:{wrapper:"overflow-y-auto h-60 border-2 border-gray-300 dark:border-gray-700",divide:"divide-gray-200 dark:divide-gray-800",tr:{active:"hover:bg-gray-200 dark:hover:bg-gray-800/50"},th:{base:"sticky top-0 z-10",color:"bg-white dark:text-gray dark:bg-[#111827]",padding:"p-0"},td:{base:"h-[31px]",padding:"py-0"}},"empty-state":{icon:"i-heroicons-circle-stack-20-solid",label:"No items."},onSelect:he,onDblclick:m[2]||(m[2]=()=>{})},Ue({"UniqueID-data":p(({row:d})=>[t("div",ol,S(d.UniqueID),1)]),"edit-data":p(({row:d})=>[o(q,{text:"Detail",class:"flex justify-center"},{default:p(()=>[o(A,{color:"gray",variant:"ghost",icon:"i-heroicons-pencil-square",onClick:ae=>J(d)},null,8,["onClick"])]),_:2},1024)]),"delete-data":p(({row:d})=>[o(q,{text:"Delete",class:"flex justify-center"},{default:p(()=>[o(A,{color:"gray",variant:"ghost",icon:"i-heroicons-trash",onClick:ae=>F(d)},null,8,["onClick"])]),_:2},1024)]),_:2},[Oe(e(x).defaultColumns,d=>({name:`${d.key}-header`,fn:p(()=>[d.kind!=="actions"?(H(),ee("div",ll,[o(O,{onHandleSortingButton:D,onHandleInputChange:k,label:d.label,sortable:d.sortable,"sort-key":d.key,"sort-icon":(d==null?void 0:d.sortDirection)==="none"?De:(d==null?void 0:d.sortDirection)==="asc"?we:Ie,filterable:d.filterable,"filter-key":d.key},null,8,["label","sortable","sort-key","sort-icon","filterable","filter-key"])])):(H(),ee("div",sl,S(d.label),1))])}))]),1032,["rows","columns","loading"])])]),t("div",al,[nl,t("div",il,[t("div",rl," Transaction#: "+S(e(_).transactionID),1),t("div",dl,[o(Y,{label:"By"},{default:p(()=>[o(Q,{modelValue:e(_).By,"onUpdate:modelValue":m[3]||(m[3]=d=>e(_).By=d)},null,8,["modelValue"])]),_:1}),o(Y,{label:"Date"},{default:p(()=>[o(ge,{popper:{placement:"bottom-start"}},{panel:p(({close:d})=>[o(Pe,{modelValue:e(_).Dated,"onUpdate:modelValue":m[4]||(m[4]=ae=>e(_).Dated=ae),"is-required":"",onClose:d},null,8,["modelValue","onClose"])]),default:p(()=>[o(A,{icon:"i-heroicons-calendar-days-20-solid",label:e(_).Dated&&e(ye)(e(_).Dated,"MM/dd/yyyy"),variant:"outline",ui:{base:"w-full",truncate:"flex justify-center w-full"},truncate:""},null,8,["label"])]),_:1})]),_:1})]),t("div",ul,[o(Y,{label:"Justification"},{default:p(()=>[o(ke,{modelValue:e(_).Justification,"onUpdate:modelValue":m[5]||(m[5]=d=>e(_).Justification=d),rows:5},null,8,["modelValue"])]),_:1})])])])])]),t("div",cl,[t("div",null,[o(A,{icon:"i-heroicons-minus-circle",label:"Delete",color:"red",variant:"outline",ui:{base:"min-w-[200px]",truncate:"flex justify-center w-full"},truncate:"",onClick:se})]),t("div",pl,[o(A,{icon:"i-f7-rays",label:"Clear Form",color:"red",variant:"outline",ui:{base:"min-w-[200px]",truncate:"flex justify-center w-full"},truncate:"",onClick:pe}),o(A,{icon:"i-heroicons-document-text",type:"submit",label:"Save",color:"green",variant:"outline",ui:{base:"min-w-[200px]",truncate:"flex justify-center w-full"},truncate:"",onClick:ce})])])]),_:1},8,["state"]),o(Me,{modelValue:e(R),"onUpdate:modelValue":m[8]||(m[8]=d=>de(R)?R.value=d:null),ui:{header:{base:"flex flex-row min-h-[0] items-center",padding:"p-0 pt-1"},body:{base:"gap-y-1",padding:"py-0 sm:pt-0"},width:"w-[300px]"}},{default:p(()=>[t("div",null,[t("div",ml,[fl,t("div",vl,[o(Q,{type:"number",modelValue:e(M),"onUpdate:modelValue":m[6]||(m[6]=d=>de(M)?M.value=d:null)},null,8,["modelValue"])])]),t("div",bl,[t("div",yl,[o(A,{label:"OK",ui:{base:"w-full",truncate:"flex justify-center w-full"},truncate:"",onClick:ie})]),t("div",_l,[o(A,{label:"Cancel",ui:{base:"w-full",truncate:"flex justify-center w-full"},truncate:"",onClick:m[7]||(m[7]=d=>R.value=!1)})])])])]),_:1},8,["modelValue"])],64)}}}),xl=async(b,i)=>{const u=Ee(),n=gt(),{cardInfo:y,orderInfo:_,customerInfo:r}=b;let U=[];U=_.lineItems.map((v,l)=>({itemId:l+1,name:v.DESCRIPTION.length?v.DESCRIPTION:"no description",description:v.DESCRIPTION,quantity:v.quantity,unitPrice:v.PRIMARYPRICE1}));try{return await $fetch.create({onResponseError({response:l}){var h,x;u.add({title:"Error",description:((h=l==null?void 0:l._data)==null?void 0:h.message)??((x=l==null?void 0:l._data)==null?void 0:x.error)??"Some error happened!",icon:"i-heroicons-exclamation-circle",color:"red"})}})("https://apitest.authorize.net/xml/v1/request.api",{method:"POST",body:{createTransactionRequest:{merchantAuthentication:{name:n.public.AUTHORIZE_API_LOGIN_KEY,transactionKey:n.public.AUTHORIZE_TRANSACTION_KEY},transactionRequest:{transactionType:"authCaptureTransaction",amount:`${y.amount}`,payment:{creditCard:{cardNumber:y.cardnumber,expirationDate:`${y.expirationyear}-${y.expirationmonth}`,cardCode:y.ccv}},lineItems:{lineItem:U},tax:{amount:`${_.tax??0}`,name:"level2 tax name",description:"level2 tax"},duty:{amount:`${_.MDET??0}`,name:"duty name",description:"duty description"},shipping:{amount:`${_.shipping??0}`,name:"level2 tax name",description:"level2 tax"},poNumber:"",customer:{id:r.customerID},billTo:{firstName:r.fname,lastName:r.lname,company:r.company1,address:r.address,city:r.city,state:r.state,zip:r.zip,country:r.country},shipTo:{firstName:r.fname,lastName:r.lname,company:r.company1,address:r.address,city:r.city,state:r.state,zip:r.zip,country:r.country},customerIP:"",transactionSettings:{setting:{settingName:"testRequest",settingValue:"false"}},userFields:{userField:[{name:"MerchantDefinedFieldName1",value:"MerchantDefinedFieldValue1"},{name:"favorite_color",value:"blue"}]},processingOptions:{isSubsequentAuth:"true"},subsequentAuthInformation:{originalNetworkTransId:n.public.AUTHORIZE_TRANSACTION_KEY,originalAuthAmount:`${_.subtotal??0}`,reason:"resubmission"},authorizationIndicatorType:{authorizationIndicator:"final"}}}},server:!1,lazy:!0,...i})}catch{}};var gl=Object.defineProperty,kl=(b,i,u)=>i in b?gl(b,i,{enumerable:!0,configurable:!0,writable:!0,value:u}):b[i]=u,Se=(b,i,u)=>kl(b,typeof i!="symbol"?i+"":i,u);const Ze={"#":{pattern:/[0-9]/},"@":{pattern:/[a-zA-Z]/},"*":{pattern:/[a-zA-Z0-9]/}},Xe=(b,i,u)=>b.replaceAll(i,"").replace(u,".").replace("..",".").replace(/[^.\d]/g,""),et=(b,i,u)=>{var n;return new Intl.NumberFormat(((n=u.number)==null?void 0:n.locale)??"en",{minimumFractionDigits:b,maximumFractionDigits:i,roundingMode:"trunc"})},wl=(b,i=!0,u)=>{var n,y,_,r;const U=((n=u.number)==null?void 0:n.unsigned)==null&&b.startsWith("-")?"-":"",v=((y=u.number)==null?void 0:y.fraction)??0;let l=et(0,v,u);const h=l.formatToParts(1000.12),x=((_=h.find(C=>C.type==="group"))==null?void 0:_.value)??" ",R=((r=h.find(C=>C.type==="decimal"))==null?void 0:r.value)??".",M=Xe(b,x,R);if(M===""||Number.isNaN(M))return U;const j=M.split(".");if(j[1]!=null&&j[1].length>=1){const C=j[1].length<=v?j[1].length:v;l=et(C,v,u)}let T=l.format(parseFloat(M));return i?v>0&&M.endsWith(".")&&!M.slice(0,-1).includes(".")&&(T+=R):T=Xe(T,x,R),U+T};class Il{constructor(i={}){Se(this,"opts",{}),Se(this,"memo",new Map);const u={...i};if(u.tokens!=null){u.tokens=u.tokensReplace?{...u.tokens}:{...Ze,...u.tokens};for(const n of Object.values(u.tokens))typeof n.pattern=="string"&&(n.pattern=new RegExp(n.pattern))}else u.tokens=Ze;Array.isArray(u.mask)&&(u.mask.length>1?u.mask=[...u.mask].sort((n,y)=>n.length-y.length):u.mask=u.mask[0]??""),u.mask===""&&(u.mask=null),this.opts=u}masked(i){return this.process(i,this.findMask(i))}unmasked(i){return this.process(i,this.findMask(i),!1)}isEager(){return this.opts.eager===!0}isReversed(){return this.opts.reversed===!0}completed(i){const u=this.findMask(i);if(this.opts.mask==null||u==null)return!1;const n=this.process(i,u).length;return typeof this.opts.mask=="string"?n>=this.opts.mask.length:n>=u.length}findMask(i){const u=this.opts.mask;if(u==null)return null;if(typeof u=="string")return u;if(typeof u=="function")return u(i);const n=this.process(i,u.slice(-1).pop()??"",!1);return u.find(y=>this.process(i,y,!1).length>=n.length)??""}escapeMask(i){const u=[],n=[];return i.split("").forEach((y,_)=>{y==="!"&&i[_-1]!=="!"?n.push(_-n.length):u.push(y)}),{mask:u.join(""),escaped:n}}process(i,u,n=!0){if(this.opts.number!=null)return wl(i,n,this.opts);if(u==null)return i;const y=`v=${i},mr=${u},m=${n?1:0}`;if(this.memo.has(y))return this.memo.get(y);const{mask:_,escaped:r}=this.escapeMask(u),U=[],v=this.opts.tokens!=null?this.opts.tokens:{},l=this.isReversed()?-1:1,h=this.isReversed()?"unshift":"push",x=this.isReversed()?0:_.length-1,R=this.isReversed()?()=>C>-1&&E>-1:()=>C<_.length&&E<i.length,M=G=>!this.isReversed()&&G<=x||this.isReversed()&&G>=x;let j,T=-1,C=this.isReversed()?_.length-1:0,E=this.isReversed()?i.length-1:0,oe=!1;for(;R();){const G=_.charAt(C),B=v[G],te=(B==null?void 0:B.transform)!=null?B.transform(i.charAt(E)):i.charAt(E);if(!r.includes(C)&&B!=null?(te.match(B.pattern)!=null?(U[h](te),B.repeated?(T===-1?T=C:C===x&&C!==T&&(C=T-l),x===T&&(C-=l)):B.multiple&&(oe=!0,C-=l),C+=l):B.multiple?oe&&(C+=l,E-=l,oe=!1):te===j?j=void 0:B.optional&&(C+=l,E-=l),E+=l):(n&&!this.isEager()&&U[h](G),te===G&&!this.isEager()?E+=l:j=G,this.isEager()||(C+=l)),this.isEager())for(;M(C)&&(v[_.charAt(C)]==null||r.includes(C));){if(n){if(U[h](_.charAt(C)),i.charAt(E)===_.charAt(C)){C+=l,E+=l;continue}}else _.charAt(C)===i.charAt(E)&&(E+=l);C+=l}}return this.memo.set(y,U.join("")),this.memo.get(y)}}const nt=b=>JSON.parse(b.replaceAll("'",'"')),Dl=(b,i={})=>{const u={...i};b.dataset.maska!=null&&b.dataset.maska!==""&&(u.mask=Cl(b.dataset.maska)),b.dataset.maskaEager!=null&&(u.eager=Ce(b.dataset.maskaEager)),b.dataset.maskaReversed!=null&&(u.reversed=Ce(b.dataset.maskaReversed)),b.dataset.maskaTokensReplace!=null&&(u.tokensReplace=Ce(b.dataset.maskaTokensReplace)),b.dataset.maskaTokens!=null&&(u.tokens=Vl(b.dataset.maskaTokens));const n={};return b.dataset.maskaNumberLocale!=null&&(n.locale=b.dataset.maskaNumberLocale),b.dataset.maskaNumberFraction!=null&&(n.fraction=parseInt(b.dataset.maskaNumberFraction)),b.dataset.maskaNumberUnsigned!=null&&(n.unsigned=Ce(b.dataset.maskaNumberUnsigned)),(b.dataset.maskaNumber!=null||Object.values(n).length>0)&&(u.number=n),u},Ce=b=>b!==""?!!JSON.parse(b):!0,Cl=b=>b.startsWith("[")&&b.endsWith("]")?nt(b):b,Vl=b=>{if(b.startsWith("{")&&b.endsWith("}"))return nt(b);const i={};return b.split("|").forEach(u=>{const n=u.split(":");i[n[0]]={pattern:new RegExp(n[1]),optional:n[2]==="optional",multiple:n[2]==="multiple",repeated:n[2]==="repeated"}}),i};class Ul{constructor(i,u={}){Se(this,"items",new Map),Se(this,"onInput",n=>{if(n instanceof CustomEvent&&n.type==="input")return;const y=n.target,_=this.items.get(y),r="inputType"in n&&n.inputType.startsWith("delete"),U=_.isEager(),v=r&&U&&_.unmasked(y.value)===""?"":y.value;this.fixCursor(y,r,()=>this.setValue(y,v))}),this.options=u,this.init(this.getInputs(i))}update(i={}){this.options={...i},this.init(Array.from(this.items.keys()))}updateValue(i){i.value!==""&&i.value!==this.processInput(i).masked&&this.setValue(i,i.value)}destroy(){for(const i of this.items.keys())i.removeEventListener("input",this.onInput);this.items.clear()}init(i){const u=this.getOptions(this.options);for(const n of i){this.items.has(n)||n.addEventListener("input",this.onInput,{capture:!0});const y=new Il(Dl(n,u));this.items.set(n,y),queueMicrotask(()=>this.updateValue(n)),n.selectionStart===null&&y.isEager()&&console.warn("Maska: input of `%s` type is not supported",n.type)}}getInputs(i){return typeof i=="string"?Array.from(document.querySelectorAll(i)):"length"in i?Array.from(i):[i]}getOptions(i){const{onMaska:u,preProcess:n,postProcess:y,..._}=i;return _}fixCursor(i,u,n){const y=i.selectionStart,_=i.value;if(n(),y===null||y===_.length&&!u)return;const r=i.value,U=_.slice(0,y),v=r.slice(0,y),l=this.processInput(i,U).unmasked,h=this.processInput(i,v).unmasked;let x=y;U!==v&&(x+=u?r.length-_.length:l.length-h.length),i.setSelectionRange(x,x)}setValue(i,u){const n=this.processInput(i,u);i.value=n.masked,this.options.onMaska!=null&&(Array.isArray(this.options.onMaska)?this.options.onMaska.forEach(y=>y(n)):this.options.onMaska(n)),i.dispatchEvent(new CustomEvent("maska",{detail:n})),i.dispatchEvent(new CustomEvent("input",{detail:n.masked}))}processInput(i,u){const n=this.items.get(i);let y=u??i.value;this.options.preProcess!=null&&(y=this.options.preProcess(y));let _=n.masked(y);return this.options.postProcess!=null&&(_=this.options.postProcess(_)),{masked:_,unmasked:n.unmasked(y),completed:n.completed(y)}}}const qe=new WeakMap,Ol=(b,i)=>{if(b.arg==null||b.instance==null)return;const u="setup"in b.instance.$.type;b.arg in b.instance?b.instance[b.arg]=i:u&&console.warn("Maska: please expose `%s` using defineExpose",b.arg)},X=(b,i)=>{var u;const n=b instanceof HTMLInputElement?b:b.querySelector("input");if(n==null||(n==null?void 0:n.type)==="file")return;let y={};if(i.value!=null&&(y=typeof i.value=="string"?{mask:i.value}:{...i.value}),i.arg!=null){const _=r=>{const U=i.modifiers.unmasked?r.unmasked:i.modifiers.completed?r.completed:r.masked;Ol(i,U)};y.onMaska=y.onMaska==null?_:Array.isArray(y.onMaska)?[...y.onMaska,_]:[y.onMaska,_]}qe.has(n)?(u=qe.get(n))==null||u.update(y):qe.set(n,new Ul(n,y))},Sl=je(Le),El={class:"vl-parent"},Pl={class:"flex flex-row"},$l={class:"basis-4/6 border-[1px] border-slate-600 border-t-0 border-l-0 border-b-0"},Ml={class:"!my-0 flex flex-row"},Tl={class:"basis-2/5"},Rl=t("div",{class:"w-full bg-slate-400 px-3 py-1"}," Order Information ",-1),ql={class:"flex flex-col p-3 pr-6 space-y-2"},Nl={class:"flex flex-row"},Al={class:"basis-1/2"},jl={class:"flex items-center min-h-[32px]"},Bl={class:"basis-1/2"},Ll={class:"flex flex-row items-center"},Fl=t("div",{class:"font-medium min-w-[137px]"}," Source ",-1),zl={class:"flex-1 pl-4"},Gl={class:"flex flex-row items-center"},Yl=t("div",{class:"font-medium min-w-[137px]"}," Source Description ",-1),Hl={class:"flex-1 pl-4"},Jl={class:"flex flex-row items-center"},Wl=t("div",{class:"font-medium min-w-[137px]"}," PO# ",-1),Ql={class:"flex-1 pl-4"},Kl={class:"flex flex-row items-center"},Zl=t("div",{class:"font-medium min-w-[137px]"}," Sold By ",-1),Xl={class:"flex-1 pl-4"},es={class:"flex flex-row items-center"},ts=t("div",{class:"font-medium min-w-[137px]"}," Quote# ",-1),ls={class:"flex-1 pl-4"},ss={class:"basis-3/5 border-[1px] border-slate-600 border-b-0 border-r-0 border-t-0"},os=t("div",{class:"w-full bg-slate-400 px-3 py-1"}," Customer Informaton ",-1),as={class:"flex flex-col py-3 px-6 space-y-2"},ns={class:"flex flex-row space-x-3"},is={class:"basis-1/2"},rs=t("div",{class:"font-bold border-b-[1px] border-black"}," Shipping Information ",-1),ds={class:"flex flex-col mt-4 space-y-3"},us={class:"flex flex-row"},cs={class:"basis-1/2"},ps={class:"basis-1/2"},ms={class:"basis-1/2"},fs=t("div",{class:"font-bold border-b-[1px] border-black"}," Billing Information ",-1),vs={class:"flex flex-col mt-4 space-y-3"},bs=t("div",null,S(""),-1),ys=t("div",{class:"w-full px-3 py-1 bg-slate-400"}," Items Ordered ",-1),_s={class:"w-full p-3 pr-8"},hs={class:"flex flex-col space-y-2"},xs={class:"flex flex-row justify-between"},gs={class:"flex flex-1 flex-row space-x-3"},ks={class:"basis-1/5"},ws={class:"basis-1/5"},Is={class:"basis-1/5"},Ds={class:"basis-1/5"},Cs={class:"basis-1/5"},Vs={class:"flex pl-10"},Us={class:"flex justify-between items-center space-x-3"},Os=t("div",null," Show Only Available Inventory ",-1),Ss=t("div",null,null,-1),Es={class:"flex flex-row items-end"},Ps={class:"flex-1"},$s={class:"flex flex-row space-x-6 items-center pt-4"},Ms={class:"flex flex-row space-x-3"},Ts=t("div",{class:"flex items-center"},"Qty:",-1),Rs={class:"w-[80px]"},qs={class:"flex flex-row space-x-3"},Ns=t("div",{class:"flex items-center"},"Serial:",-1),As={class:"min-w-[150px]"},js={class:"flex flex-row space-x-3 ml-4"},Bs=t("div",null,null,-1),Ls={class:"flex flex-row justify-between items-end pt-4"},Fs={class:"flex-1"},zs={class:"flex flex-row space-x-2 w-full"},Gs={class:"basis-1/2"},Ys={class:"basis-1/2"},Hs={class:"w-full p-3 border-[1px] border-slate-600 border-l-0 border-b-0 border-r-0 mt-4"},Js={class:"flex flex-row space-x-3"},Ws={class:"basis-1/2"},Qs={class:"flex flex-row space-x-3"},Ks={class:"basis-7/12 flex flex-row space-x-3"},Zs={class:"basis-1/5"},Xs={class:"basis-4/5"},eo={class:"basis-5/12 w-full"},to={class:"flex flex-row space-x-3"},lo={class:"basis-7/12 flex items-end justify-end"},so={class:""},oo={class:"basis-5/12"},ao={class:"basis-1/2"},no={class:"basis-2/6 w-full"},io=t("div",{class:"w-full px-3 py-1 bg-slate-400"}," Order Information ",-1),ro={class:"flex flex-col space-y-4 w-full p-3 pl-8"},uo={class:"flex flex-col space-y-2"},co={class:"flex flex-row space-x-2 w-full"},po={class:"basis-1/2"},mo={class:"flex items-center min-h-[32px]"},fo={class:"basis-1/2"},vo={class:"flex flex-row space-x-2 w-full"},bo={class:"basis-1/2"},yo={class:"basis-1/2"},_o={class:"flex flex-row space-x-2 w-full"},ho={class:"basis-1/2"},xo={class:"basis-1/2"},go={class:"flex flex-row space-x-1"},ko={class:"flex-1"},wo={class:"flex items-end"},Io={class:"flex flex-col space-y-2"},Do={class:"flex flex-row space-x-2"},Co=t("div",{class:"basis-1/2 flex items-center"}," Items Total ",-1),Vo={class:"basis-1/2"},Uo={class:"flex flex-row space-x-2"},Oo=t("div",{class:"basis-1/2 flex items-center"}," Less Discount ",-1),So={class:"basis-1/2"},Eo={class:"flex flex-row space-x-2"},Po=t("div",{class:"basis-1/2 flex items-center"}," Less Down ",-1),$o={class:"basis-1/2"},Mo={class:"flex flex-row space-x-2"},To={class:"basis-1/2 flex items-center"},Ro={class:"flex flex-row space-x-4 w-full"},qo=t("div",{class:"basis-1/2"}," Sales Tax ",-1),No={class:"basis-1/2"},Ao={class:"flex flex-row items-center space-x-1"},jo=t("div",null," (Exempt) ",-1),Bo={class:"basis-1/2"},Lo={class:"flex flex-row space-x-2"},Fo={class:"basis-1/2 flex items-center"},zo={class:"flex flex-row space-x-4 w-full"},Go=t("div",{class:"basis-1/2"}," MDET 2.3 % ",-1),Yo={class:"basis-1/2"},Ho={class:"flex flex-row items-center space-x-1"},Jo=t("div",null," (Apply) ",-1),Wo={class:"basis-1/2"},Qo={class:"flex flex-row space-x-2"},Ko=t("div",{class:"basis-1/2 flex items-center"}," COD ",-1),Zo={class:"basis-1/2"},Xo={class:"flex flex-row space-x-2"},ea=t("div",{class:"basis-1/2 flex items-center"}," Shipping ",-1),ta={class:"basis-1/2"},la={class:"flex flex-row space-x-2"},sa=t("div",{class:"basis-1/2 flex items-center"}," Subtotal ",-1),oa={class:"basis-1/2"},aa={class:"flex flex-row space-x-2"},na=t("div",{class:"basis-1/2 flex items-center"}," Total ",-1),ia={class:"basis-1/2"},ra={class:"flex flex-row space-x-3"},da={class:"basis-1/2"},ua={class:"basis-1/2"},ca={class:"flex flex-row space-x-2 w-full items-center"},pa={class:"basis-1/2 w-full flex justify-center"},ma={class:"basis-1/2"},fa={class:"flex justify-between items-center"},va=t("div",{class:"basis-1/2"}," Last 4 Digitals ",-1),ba={class:"basis-1/2"},ya={class:"flex flex-row space-x-3 w-full"},_a={class:"basis-1/2 w-full"},ha={class:"basis-1/2 w-full"},xa=t("div",{class:"w-full px-3 py-1 bg-slate-400"}," Printing Options ",-1),ga={class:"flex flex-col space-y-3 w-full p-3 pl-6"},ka={class:"flex flex-row space-x-4"},wa={class:"basis-1/2"},Ia={class:"basis-1/2"},Da={class:"flex flex-row space-x-4"},Ca={class:"basis-1/2"},Va={class:"basis-1/2"},Ua={class:"w-full"},Oa={class:"flex flex-row space-x-5"},Sa=t("div",{class:"flex items-center"},"Price: ",-1),Ea={class:"flex-1 mr-4"},Pa={class:"flex flex-row-reverse mt-2"},$a={class:"min-w-[60px]"},Ma={class:"min-w-[60px] mr-3"},Ta={class:"mt-2"},Ra={class:"w-full"},qa={class:"mt-2 flex justify-between"},Na={class:"flex flex-row space-x-2"},Aa={class:"w-[100px]"},ja={class:"w-[100px]"},Ba={class:"w-[100px]"},La={class:"flex flex-row-reverse mt-2"},Fa={class:"min-w-[60px]"},za={class:"min-w-[60px] mr-3"},Ga=Ne({__name:"InvoiceDetail",props:{selectedCustomer:{type:[Number,String,null],required:!0},selectedOrder:{type:[Number,String,null]},selectedComplaint:{type:[Number,String,null]}},emits:["close","save"],setup(b,{emit:i}){const u=i,n=b,y=Ee(),_=I([{key:"PRODUCTLINE",label:"Product Line"},{key:"UniqueID",label:"Number"},{key:"DESCRIPTION",label:"Description"},{key:"PRIMARYPRICE1",label:"Price"}]),r=I([{key:"quantity",label:"Quantity"},{key:"bpid",label:"Number"},{key:"DESCRIPTION",label:"Description"},{key:"PRIMARYPRICE1",label:"Price"},{key:"serial",label:"Serial Number"}]),U=I(!1),v=Ve({customerID:n.selectedCustomer,market:null,number:null,source:null,sourcedescription:null,SourceConfrence:null,fname:null,mi:null,lname:null,title:null,position:null,company1:null,company2:null,country:null,address:null,city:null,state:null,zip:null,workphone:null,homephone:null,cellphone:null,fax:null,email:null,website:null,notes:null,billcompany1:null,billcompany2:null,billcountry:null,billaddress:null,billcity:null,billstate:null,billzip:null,billphone:null,billfax:null,attn:null,adddate:null,ParadynamixCatagory:null,fullname:null,Extension:null,ExtensionBill:null}),l=Ve({customerid:n.selectedCustomer,orderdate:new Date,orderid:(n==null?void 0:n.selectedOrder)??null,shippingmethod:null,datepromised:"",specialinstructions1:"",specialinstructions2:"",invoicenumber:(n==null?void 0:n.selectedOrder)??null,referredby:null,referphone1:null,referphone2:null,referphone3:null,terms:"",checknoorcreditcardinfo:"",purchaseordernumber:"",fob:"",source:null,sourcedescription:null,soldby:null,serial:null,Notes:null,zone:null,package:null,invoicedate:new Date,shipdate:null,subtotal:0,total:0,lessdiscount:"0.0",lessdown:"0.0",tax:"0.0",cod:"0.0",exempt:null,checking:null,shipping:"0.0",authorization:null,TrackingNumbers:null,quotenumber:0,weekstodelivery:"",laborcost:null,materialcost:null,warranty:"",acceptancedate:null,expirationdate:null,QuoteInvoiceNumber:null,Backorder:null,MDET:null,MDET1:null,Quote:null,QuoteOrderNumber:null,status:"Open",estimatedbooking:null,estimatedship:null,complaintID:n.selectedComplaint??null,InstallationBy:null}),h=Ve({productLine:null,model:null,category:null,subcategory:null,stock:null}),x=I([]),R=I([]),M=I([]),j=I([]),T=I([]),C=I([]),E=I([]),oe=I(["UPS Ground","UPS 2nd Day","UPS Next Day","Priority Mail","USPS Mail","Field Service","Deliver","Pick Up","Freight","On-Site"]),G=I([null,"Marietta, OH","PAW PAW, MI"]),B=I([]),te=I([null,"Yes","No"]),he=I(["Prepaid","Check","Money Order","Visa","Master Card","Discover","American Express","Net 30","50% Down Net 30","COD","Capped Rental","Loan/Gift","Warranty","Warranty Replacement"]),ue=I([]),le=I(null),L=I([]),N=I(null),D=I(1),k=I(0),J=I("outline-none"),F=I("outline-none"),ie=I("outline-none"),re=I("outline-none"),se=I("outline-none"),ce=I("outline-none"),pe=I("outline-none"),me=I("outline-none"),fe=I("outline-none"),f=I("outline-none"),m=I("outline-none"),Q=I("outline-none"),A=I("outline-none"),O=I({cardnumber:"",expirationmonth:null,expirationyear:null,ccv:null,amount:0}),q=I({isUpdatePriceModalOpen:!1,isInventoryTransactionModalOpen:!1,isCreditCardInfoInputModalOpen:!1,isCreditCardAmountInputModalOpen:!1}),W=I(null),V=I(!1),Y=I(!1),Pe=async()=>{U.value=!0,await $(`/api/invoices/${n.selectedOrder}`,{method:"GET",onResponse({response:c}){if(c.status===200)for(const s in c._data.body)c._data.body[s]!==void 0&&c._data.body[s]!==" "&&(l[s]=c._data.body[s])}}),await $(`/api/tbl/tblSourceCodes?source=${l.source}`,{method:"GET",onResponse({response:c}){c.status===200&&(M.value=c._data.body.map(s=>s.description))}}),await $("/api/invoices/detail/",{method:"GET",params:{orderid:n.selectedOrder},onResponse({response:c}){if(c.status===200)for(let s=0;s<c._data.body.length;s++){let g=c._data.body[s];const w={UniqueID:g.UniqueID,bpid:g.bpid,quantity:g.quantity,DESCRIPTION:g.name,PRIMARYPRICE1:g.price,serial:g.serial};L.value.push(w)}}}),await ge()},ge=async()=>{U.value=!0,await $(`/api/customers/${n.selectedCustomer}`,{method:"GET",onResponse({response:c}){if(c.status===200)for(const s in c._data.body)c._data.body[s]&&(v[s]=c._data.body[s])}}),!n.selectedOrder&&await $("/api/invoices/lastorderid",{method:"GET",onResponse({response:c}){c.status===200&&(l.orderid=c._data.body+1,l.invoicenumber=c._data.body+1)}}),U.value=!1,await $("/api/tbl/tblSourceCodes",{method:"GET",onResponse({response:c}){var s,g;c.status===200&&((g=(s=c._data)==null?void 0:s.body)!=null&&g.length?(x.value=c._data.body,R.value=x.value.map(w=>w.source).sort(),R.value=R.value.filter((w,ne)=>R.value.indexOf(w)===ne&&w!=""&&w!=null),R.value.unshift(null)):(R.value=[],M.value=[]))}}),await $("/api/tbl/tblEmployee?ACTIVE=1",{method:"GET",onResponse({response:c}){var s,g;c.status===200&&((g=(s=c._data)==null?void 0:s.body)!=null&&g.length?(j.value=c._data.body.map(w=>`#${w.payrollnumber||"n/a"} ${w.fname||""} ${w.lname||""}`),j.value.unshift(null),B.value=c._data.body.filter(w=>[1,65,62,18,44].includes(w.UniqueID)),B.value=B.value.map(w=>`#${w.payrollnumber||"n/a"} ${w.fname||""} ${w.lname||""}`).sort(),B.value.unshift(null)):j.value=[])}}),await $("/api/materials/productlines",{method:"GET",onResponse({response:c}){var s,g,w;c.status===200&&((g=(s=c._data)==null?void 0:s.body)!=null&&g.length?(T.value=(w=c._data)==null?void 0:w.body,T.value.unshift(null)):T.value=[])}}),U.value=!1},ke=async()=>{await $("/api/materials/products",{method:"GET",params:{productline:h.productLine,category:h.category,subcategory:h.subcategory,model:h.model,stock:h.stock},onResponse({response:c}){c.status===200&&(ue.value=c._data.body)}})},$e=async c=>{M.value=x.value.filter(s=>s.source===c&&s.source!=""&&s.source!=null).map(s=>s.description),M.value.unshift(null)},Me=async()=>{await $("/api/materials/categories",{method:"GET",params:{productline:h.productLine},onResponse({response:c}){var s,g,w;c.status===200&&((g=(s=c._data)==null?void 0:s.body)!=null&&g.length?(C.value=(w=c._data)==null?void 0:w.body,C.value.unshift(null)):C.value=[])}}),await $("/api/materials/subcategories",{method:"GET",params:{productline:h.productLine,category:h.category},onResponse({response:c}){var s,g,w;c.status===200&&((g=(s=c._data)==null?void 0:s.body)!=null&&g.length?(E.value=(w=c._data)==null?void 0:w.body,E.value.unshift(null)):E.value=[])}}),ke()},d=async()=>{await $("/api/materials/subcategories",{method:"GET",params:{productline:h.productLine,category:h.category},onResponse({response:c}){var s,g,w;c.status===200&&((g=(s=c._data)==null?void 0:s.body)!=null&&g.length?(E.value=(w=c._data)==null?void 0:w.body,E.value.unshift(null)):E.value=[])}}),ke()},ae=c=>{JSON.stringify({...le.value,class:""})===JSON.stringify({...c,class:""})?le.value=null:le.value={...c,class:""},ue.value.forEach(s=>{s.UniqueID===c.UniqueID&&c.class!="bg-gray-200"?s.class="bg-gray-200":delete s.class})},it=c=>{N.value==c?N.value=null:N.value=c,L.value.forEach(s=>{s.UniqueID===c.UniqueID&&s.created===c.created&&c.class!="bg-gray-200"?s.class="bg-gray-200":delete s.class})},rt=()=>{if(D.value<1||!Number.isInteger(D.value)){J.value="outline outline-2 outline-[red]";return}else J.value="outline-none";if(le.value&&D.value){const c={...le.value,UniqueID:null,bpid:le.value.UniqueID,quantity:D.value,created:new Date().getTime()};L.value.push(c)}K()},dt=async()=>{var c;if(N.value){const s=L.value.findIndex(g=>g.UniqueID===N.value.UniqueID&&g.created===N.value.created);s>-1&&(L.value.splice(s,1),(((c=N==null?void 0:N.value)==null?void 0:c.UniqueID)??!1)&&await $(`/api/invoices/detail/${N.value.UniqueID}`,{method:"DELETE",onResponse(){},onResponseError(){}}),N.value=null)}K()},ut=()=>{N.value&&(q.value.isUpdatePriceModalOpen=!0,W.value=N.value.PRIMARYPRICE1),K()},ct=()=>{q.value.isInventoryTransactionModalOpen=!0},pt=()=>{N.value.PRIMARYPRICE1=W.value;const c=L.value.findIndex(s=>s.UniqueID===N.value.UniqueID&&s.created===N.value.created);L.value.splice(c,1,{...L.value[c],PRIMARYPRICE1:W.value}),K(),q.value.isUpdatePriceModalOpen=!1},K=()=>{L.value.length,Number(l.lessdiscount)<0?F.value="outline outline-2 outline-[red]":F.value="outline-none",Number(l.lessdown)<0?(console.log(Number(l.lessdown)),ie.value="outline outline-2 outline-[red]"):ie.value="outline-none",Number(l.tax)<0?re.value="outline outline-2 outline-[red]":re.value="outline-none",Number(l.MDET)<0?se.value="outline outline-2 outline-[red]":se.value="outline-none",Number(l.cod)<0?ce.value="outline outline-2 outline-[red]":ce.value="outline-none",Number(l.shipping)<0?pe.value="outline outline-2 outline-[red]":pe.value="outline-none",l.lessdiscount=Number(l.lessdiscount).toFixed(2),l.lessdown=Number(l.lessdown).toFixed(2),l.tax=Number(l.tax).toFixed(2),l.MDET=Number(l.MDET).toFixed(2),l.cod=Number(l.cod).toFixed(2),l.shipping=Number(l.shipping).toFixed(2),k.value=0,L.value.forEach(c=>{k.value+=((c==null?void 0:c.quantity)??0)*((c==null?void 0:c.PRIMARYPRICE1)??0)}),l.subtotal=Number(k.value)-Number(l.lessdiscount)-Number(l.lessdown)+Number(l.shipping),l.total=Number(l.subtotal)+(V.value?Number(l.MDET):0),k.value=Math.round(k.value*100)/100,l.subtotal=Math.round(l.subtotal*100)/100,l.total=Math.round(l.total*100)/100},mt=()=>{O.value.amount=l.total,q.value.isCreditCardInfoInputModalOpen=!0},ft=async()=>{if(O.value.cardnumber.length===19)f.value="outline-none";else{f.value="outline outline-2 outline-[red]";return}if(O.value.expirationmonth<1||O.value.expirationmonth>13){m.value="outline outline-2 outline-[red]";return}else m.value="outline-none";if(O.value.expirationyear<1){Q.value="outline outline-2 outline-[red]";return}else Q.value="outline-none";if(O.value.ccv<0||!O.value.ccv){A.value="outline outline-2 outline-[red]";return}else A.value="outline-none";await xl({cardInfo:{cardnumber:O.value.cardnumber.replaceAll(" ",""),expirationyear:O.value.expirationyear,expirationmonth:O.value.expirationmonth,amount:O.value.amount},orderInfo:{...l,lineItems:L.value},customerInfo:{...v}},{onResponse({response:c}){var s,g,w,ne,ve,z,P,xe,_e;c._data.messages.resultCode==="Ok"?(y.add({title:"Success",description:((w=(g=(s=c._data)==null?void 0:s.transactionResponse)==null?void 0:g.messages[0])==null?void 0:w.description)??"",icon:"i-heroicons-shopping-cart",color:"green"}),Y.value=!0):y.add({title:"Fail",description:((z=(ve=(ne=c._data)==null?void 0:ne.transactionResponse)==null?void 0:ve.errors[0])==null?void 0:z.errorText)??((_e=(xe=(P=c._data)==null?void 0:P.messages)==null?void 0:xe.message[0])==null?void 0:_e.text),icon:"i-heroicons-exclamation-triangle",color:"red"}),q.value.isCreditCardInfoInputModalOpen=!1,O.value.cardnumber="",O.value.expirationmonth="",O.value.expirationyear="",O.value.ccv="",O.value.amount=0}})},vt=c=>{const s=[];return c.fname||s.push({path:"fname",message:"Please enter your frist name."}),c.lname||s.push({path:"lname",message:"Please enter a your last name."}),c.email||s.push({path:"email",message:"Please enter an email."}),s};async function Je(c){n.selectedOrder?await $(`/api/invoices/${n.selectedOrder}`,{method:"PUT",body:{...l,terms:Y.value?l.terms:null,lessdiscount:Number(l.lessdiscount),lessdown:Number(l.lessdown),tax:Number(l.tax),cod:Number(l.cod),shipping:Number(l.shipping),MDET:l.MDET?Number(l.MDET):null,orderDetail:L.value},onResponse({response:s}){s.status===200&&(y.add({title:"Success",description:s._data.message,icon:"i-heroicons-shopping-cart",color:"green"}),u("save"),u("close"))}}):await $("/api/invoices",{method:"POST",body:{...l,terms:Y.value?l.terms:null,lessdiscount:Number(l.lessdiscount),lessdown:Number(l.lessdown),tax:Number(l.tax),cod:Number(l.cod),shipping:Number(l.shipping),MDET:l.MDET?Number(l.MDET):null,orderDetail:L.value},onResponse({response:s}){s.status===201&&(y.add({title:"Success",description:s._data.message,icon:"i-heroicons-shopping-cart",color:"green"}),u("save"),u("close"))}})}return n.selectedOrder?Pe():ge(),(c,s)=>{const g=Ge,w=Be,ne=Sl,ve=Fe,z=Vt,P=ze,xe=St,_e=Et,We=Ye,bt=ot,yt=tt,Te=He,_t=hl;return H(),ee(Ae,null,[t("div",El,[o(e(at),{active:e(U),"onUpdate:active":s[0]||(s[0]=a=>de(U)?U.value=a:null),"is-full-page":!0,color:"#000000",backgroundColor:"#1B2533",loader:"dots"},null,8,["active"])]),o(yt,{validate:vt,"validate-on":["submit"],state:e(l),onSubmit:Je},{default:p(()=>[t("div",Pl,[t("div",$l,[t("div",Ml,[t("div",Tl,[Rl,t("div",ql,[t("div",Nl,[t("div",Al,[o(g,{label:"Order#",name:"orderID"},{default:p(()=>[t("div",jl,S(e(l).orderid),1)]),_:1})]),t("div",Bl,[o(g,{label:"Quote Date(Invoice Date)",name:"quoteDate"},{default:p(()=>[o(ve,{popper:{placement:"bottom-start"}},{panel:p(({close:a})=>[o(ne,{modelValue:e(l).orderdate,"onUpdate:modelValue":s[1]||(s[1]=be=>e(l).orderdate=be),"is-required":"",onClose:a},null,8,["modelValue","onClose"])]),default:p(()=>[o(w,{icon:"i-heroicons-calendar-days-20-solid",label:e(l).orderdate&&e(ye)(e(l).orderdate,"MM/dd/yyyy"),variant:"outline",ui:{base:"w-full",truncate:"flex justify-center w-full"},truncate:""},null,8,["label"])]),_:1})]),_:1})])]),t("div",Ll,[Fl,t("div",zl,[o(z,{modelValue:e(l).source,"onUpdate:modelValue":s[2]||(s[2]=a=>e(l).source=a),options:e(R),onChange:$e},null,8,["modelValue","options"])])]),t("div",Gl,[Yl,t("div",Hl,[o(z,{modelValue:e(l).sourcedescription,"onUpdate:modelValue":s[3]||(s[3]=a=>e(l).sourcedescription=a),options:e(M)},null,8,["modelValue","options"])])]),t("div",Jl,[Wl,t("div",Ql,[o(P,{modelValue:e(l).purchaseordernumber,"onUpdate:modelValue":s[4]||(s[4]=a=>e(l).purchaseordernumber=a)},null,8,["modelValue"])])]),t("div",Kl,[Zl,t("div",Xl,[o(z,{modelValue:e(l).soldby,"onUpdate:modelValue":s[5]||(s[5]=a=>e(l).soldby=a),options:e(j)},null,8,["modelValue","options"])])]),t("div",es,[ts,t("div",ls,[o(xe,{modelValue:e(l).Quote,"onUpdate:modelValue":s[6]||(s[6]=a=>e(l).Quote=a),query:e(l).Quote,"onUpdate:query":s[7]||(s[7]=a=>e(l).Quote=a),options:[]},null,8,["modelValue","query"])])])])]),t("div",ss,[os,t("div",as,[t("div",null," Customer# "+S(e(v).number?e(v).number:""),1),t("div",ns,[t("div",is,[rs,t("div",ds,[t("div",null,S(e(v).fname?e(v).fname:"")+" "+S(e(v).lname?e(v).lname:""),1),t("div",null,S(e(v).company1?e(v).company1:""),1),t("div",null,S(e(v).company2?e(v).company2:""),1),t("div",null,S(e(v).address?e(v).address:""),1),t("div",null,S(e(v).city?e(v).city:"")+" "+S(e(v).state?`, ${e(v).state}`:"")+" "+S(e(v).zip?`, ${e(v).zip}`:""),1),t("div",us,[t("div",cs,S(e(v).homephone?`H: ${e(v).homephone}`:""),1),t("div",ps,S(e(v).workphone?`W: ${e(v).workphone}`:""),1)]),t("div",null,S(e(v).cellphone?`C: ${e(v).cellphone}`:""),1)])]),t("div",ms,[fs,t("div",vs,[bs,t("div",null,S(e(v).billcompany1?e(v).billcompany1:""),1),t("div",null,S(e(v).billcompany2?e(v).billcompany2:""),1),t("div",null,S(e(v).billaddress?e(v).billaddress:""),1),t("div",null,S(e(v).billcity?e(v).billcity:"")+" "+S(e(v).billstate?`, ${e(v).billstate}`:"")+" "+S(e(v).billzip?`,  ${e(v).billzip}`:""),1),t("div",null,S(e(v).billphone?`P: ${e(v).billphone}`:""),1)])])])])])]),ys,t("div",_s,[t("div",hs,[t("div",xs,[t("div",gs,[t("div",ks,[o(g,{label:"Product Line",name:"productLine"},{default:p(()=>[o(z,{modelValue:e(h).productLine,"onUpdate:modelValue":s[8]||(s[8]=a=>e(h).productLine=a),options:e(T),onChange:Me},null,8,["modelValue","options"])]),_:1})]),t("div",ws,[o(g,{label:"Model#",name:"model"},{default:p(()=>[o(P,{modelValue:e(h).model,"onUpdate:modelValue":s[9]||(s[9]=a=>e(h).model=a)},null,8,["modelValue"])]),_:1})]),t("div",Is,[o(g,{label:"Category",name:"category"},{default:p(()=>[o(z,{modelValue:e(h).category,"onUpdate:modelValue":s[10]||(s[10]=a=>e(h).category=a),options:e(C),onChange:d},null,8,["modelValue","options"])]),_:1})]),t("div",Ds,[o(g,{label:"Sub-Category",name:"subCategory"},{default:p(()=>[o(z,{modelValue:e(h).subcategory,"onUpdate:modelValue":s[11]||(s[11]=a=>e(h).subcategory=a),options:e(E)},null,8,["modelValue","options"])]),_:1})]),t("div",Cs,[o(g,{label:"Stock#",name:"stock"},{default:p(()=>[o(P,{modelValue:e(h).stock,"onUpdate:modelValue":s[12]||(s[12]=a=>e(h).stock=a)},null,8,["modelValue"])]),_:1})])]),t("div",Vs,[t("div",Us,[Os,t("div",null,[o(_e,{name:"fix"})])])])]),t("div",null,[o(We,{columns:e(_),rows:e(ue),ui:{wrapper:"h-32 border-[1px] border-gray-400 dark:border-gray-700",tr:{active:"hover:bg-gray-200 dark:hover:bg-gray-800/50"},th:{padding:"p-1",base:"sticky top-0 z-10",color:"bg-white dark:text-gray dark:bg-[#111827]"},td:{padding:"p-1"},checkbox:{padding:"p-1 w-[10px]"}},onSelect:ae},{"empty-state":p(()=>[Ss]),_:1},8,["columns","rows"])]),t("div",Es,[t("div",Ps,[t("div",$s,[t("div",Ms,[Ts,t("div",Rs,[o(P,{modelValue:e(D),"onUpdate:modelValue":s[13]||(s[13]=a=>de(D)?D.value=a:null),type:"number",ui:{base:e(J)}},null,8,["modelValue","ui"])])]),t("div",qs,[Ns,t("div",As,[o(xe,{modelValue:e(l).serial,"onUpdate:modelValue":s[14]||(s[14]=a=>e(l).serial=a),options:[]},null,8,["modelValue"])])])])]),t("div",js,[o(w,{label:"Add",ui:{base:"min-w-[125px] justify-center"},onClick:rt}),o(w,{label:"Remove",ui:{base:"min-w-[125px] justify-center"},onClick:dt}),o(w,{label:"Update Price",ui:{base:"min-w-[125px] justify-center"},onClick:ut})])]),t("div",null,[o(We,{columns:e(r),rows:e(L),ui:{wrapper:"h-32 border-[1px] border-gray-400 dark:border-gray-700",tr:{active:"hover:bg-gray-200 dark:hover:bg-gray-800/50"},th:{padding:"p-1",base:"sticky top-0 z-10",color:"bg-white dark:text-gray dark:bg-[#111827]"},td:{padding:"p-1"},checkbox:{padding:"p-1 w-[10px]"}},onSelect:it},{"empty-state":p(()=>[Bs]),_:1},8,["columns","rows"])]),t("div",Ls,[t("div",Fs,[o(g,{label:"Special Instrutions(40 Characters MAX Each Line)",name:"stock"},{default:p(()=>[t("div",zs,[t("div",Gs,[o(P,{modelValue:e(l).specialinstructions1,"onUpdate:modelValue":s[15]||(s[15]=a=>e(l).specialinstructions1=a)},null,8,["modelValue"])]),t("div",Ys,[o(P,{modelValue:e(l).specialinstructions2,"onUpdate:modelValue":s[16]||(s[16]=a=>e(l).specialinstructions2=a)},null,8,["modelValue"])])])]),_:1})])])])]),t("div",Hs,[t("div",Js,[t("div",Ws,[t("div",Qs,[t("div",Ks,[t("div",Zs,[o(g,{label:"Zone",name:"zone"},{default:p(()=>[o(P,{modelValue:e(l).zone,"onUpdate:modelValue":s[17]||(s[17]=a=>e(l).zone=a)},null,8,["modelValue"])]),_:1})]),t("div",Xs,[o(g,{label:"Select Package",name:"package"},{default:p(()=>[o(z,{modelValue:e(l).package,"onUpdate:modelValue":s[18]||(s[18]=a=>e(l).package=a),query:e(l).package,"onUpdate:query":s[19]||(s[19]=a=>e(l).package=a),options:[]},null,8,["modelValue","query"])]),_:1})])]),t("div",eo,[o(g,{label:"Method",name:"method"},{default:p(()=>[o(z,{modelValue:e(l).shippingmethod,"onUpdate:modelValue":s[20]||(s[20]=a=>e(l).shippingmethod=a),query:e(l).shippingmethod,"onUpdate:query":s[21]||(s[21]=a=>e(l).shippingmethod=a),options:e(oe)},null,8,["modelValue","query","options"])]),_:1})])]),t("div",to,[t("div",lo,[t("div",so,[o(w,{label:"Calculate",ui:{base:"justify-center"}})])]),t("div",oo,[o(g,{label:"FOB",name:"fob"},{default:p(()=>[o(z,{modelValue:e(l).fob,"onUpdate:modelValue":s[22]||(s[22]=a=>e(l).fob=a),query:e(l).fob,"onUpdate:query":s[23]||(s[23]=a=>e(l).fob=a),options:e(G)},null,8,["modelValue","query","options"])]),_:1})])])]),t("div",ao,[o(g,{label:"Notes",name:"notes"},{default:p(()=>[o(bt,{rows:4,modelValue:e(l).Notes,"onUpdate:modelValue":s[24]||(s[24]=a=>e(l).Notes=a)},null,8,["modelValue"])]),_:1})])])])]),t("div",no,[io,t("div",ro,[t("div",uo,[t("div",co,[t("div",po,[o(g,{label:"Invoice#",name:"invoice"},{default:p(()=>[t("div",mo,S(e(l).invoicenumber),1)]),_:1})]),t("div",fo,[o(g,{label:"Invoice Date",name:"invoiceDate"},{default:p(()=>[o(ve,{popper:{placement:"bottom-start"}},{panel:p(({close:a})=>[o(ne,{modelValue:e(l).invoicedate,"onUpdate:modelValue":s[25]||(s[25]=be=>e(l).invoicedate=be),"is-required":"",onClose:a},null,8,["modelValue","onClose"])]),default:p(()=>[o(w,{icon:"i-heroicons-calendar-days-20-solid",label:e(l).invoicedate&&e(ye)(e(l).invoicedate,"MM/dd/yyyy"),variant:"outline",ui:{base:"w-full",truncate:"flex justify-center w-full"},truncate:""},null,8,["label"])]),_:1})]),_:1})])]),t("div",vo,[t("div",bo,[o(g,{label:"Installation Date",name:"installationDate"},{default:p(()=>[o(ve,{popper:{placement:"bottom-start"}},{panel:p(({close:a})=>[o(ne,{modelValue:e(l).acceptancedate,"onUpdate:modelValue":s[26]||(s[26]=be=>e(l).acceptancedate=be),"is-required":"",onClose:a},null,8,["modelValue","onClose"])]),default:p(()=>[o(w,{icon:"i-heroicons-calendar-days-20-solid",label:e(l).acceptancedate&&e(ye)(e(l).acceptancedate,"MM/dd/yyyy"),variant:"outline",ui:{base:"w-full",truncate:"flex justify-center w-full"},truncate:""},null,8,["label"])]),_:1})]),_:1})]),t("div",yo,[o(g,{label:"Date Shipped",name:"shippedDate"},{default:p(()=>[o(ve,{popper:{placement:"bottom-start"}},{panel:p(({close:a})=>[o(ne,{modelValue:e(l).shipdate,"onUpdate:modelValue":s[27]||(s[27]=be=>e(l).shipdate=be),"is-required":"",onClose:a},null,8,["modelValue","onClose"])]),default:p(()=>[o(w,{icon:"i-heroicons-calendar-days-20-solid",label:e(l).shipdate&&e(ye)(e(l).shipdate,"MM/dd/yyyy"),variant:"outline",ui:{base:"w-full",truncate:"flex justify-center w-full"},truncate:""},null,8,["label"])]),_:1})]),_:1})])]),t("div",_o,[t("div",ho,[o(g,{label:"Installation By",name:"installationBy"},{default:p(()=>[o(z,{modelValue:e(l).InstallationBy,"onUpdate:modelValue":s[28]||(s[28]=a=>e(l).InstallationBy=a),query:e(l).InstallationBy,"onUpdate:query":s[29]||(s[29]=a=>e(l).InstallationBy=a),options:e(B)},null,8,["modelValue","query","options"])]),_:1})]),t("div",xo,[t("div",go,[t("div",ko,[o(g,{label:"Back Order",name:"backOrder"},{default:p(()=>[o(z,{modelValue:e(l).Backorder,"onUpdate:modelValue":s[30]||(s[30]=a=>e(l).Backorder=a),query:e(l).Backorder,"onUpdate:query":s[31]||(s[31]=a=>e(l).Backorder=a),options:e(te)},null,8,["modelValue","query","options"])]),_:1})]),t("div",wo,[o(w,{label:"Calculate",ui:{base:"justify-center"}})])])])])]),o(g,{label:"Order Total"},{default:p(()=>[t("div",Io,[t("div",Do,[Co,t("div",Vo,[o(P,{modelValue:e(k),"onUpdate:modelValue":s[32]||(s[32]=a=>de(k)?k.value=a:null),disabled:"",type:"number",ui:{base:"text-right"}},null,8,["modelValue"])])]),t("div",Uo,[Oo,t("div",So,[Z(o(P,{modelValue:e(l).lessdiscount,"onUpdate:modelValue":s[33]||(s[33]=a=>e(l).lessdiscount=a),ui:{base:e(F)+" text-right"},onChange:K},null,8,["modelValue","ui"]),[[e(X),{mask:"0.99",tokens:{0:{pattern:/[0-9]/,multiple:!0},9:{pattern:/[0-9]/,optional:!0}}}]])])]),t("div",Eo,[Po,t("div",$o,[Z(o(P,{modelValue:e(l).lessdown,"onUpdate:modelValue":s[34]||(s[34]=a=>e(l).lessdown=a),ui:{base:e(ie)+" text-right"},onChange:K},null,8,["modelValue","ui"]),[[e(X),{mask:"0.99",tokens:{0:{pattern:/[0-9]/,multiple:!0},9:{pattern:/[0-9]/,optional:!0}}}]])])]),t("div",Mo,[t("div",To,[t("div",Ro,[qo,t("div",No,[t("div",Ao,[t("div",null,[o(_e,{name:"tax"})]),jo])])])]),t("div",Bo,[Z(o(P,{modelValue:e(l).tax,"onUpdate:modelValue":s[35]||(s[35]=a=>e(l).tax=a),ui:{base:e(re)+" text-right"},onChange:K},null,8,["modelValue","ui"]),[[e(X),{mask:"0.99",tokens:{0:{pattern:/[0-9]/,multiple:!0},9:{pattern:/[0-9]/,optional:!0}}}]])])]),t("div",Lo,[t("div",Fo,[t("div",zo,[Go,t("div",Yo,[t("div",Ho,[t("div",null,[o(_e,{name:"mdet","model-value":e(V),"onUpdate:modelValue":s[36]||(s[36]=a=>de(V)?V.value=a:null),onChange:K},null,8,["model-value"])]),Jo])])])]),t("div",Wo,[Z(o(P,{modelValue:e(l).MDET,"onUpdate:modelValue":s[37]||(s[37]=a=>e(l).MDET=a),ui:{base:e(se)+" text-right"},onChange:K},null,8,["modelValue","ui"]),[[e(X),{mask:"0.99",tokens:{0:{pattern:/[0-9]/,multiple:!0},9:{pattern:/[0-9]/,optional:!0}}}]])])]),t("div",Qo,[Ko,t("div",Zo,[Z(o(P,{modelValue:e(l).cod,"onUpdate:modelValue":s[38]||(s[38]=a=>e(l).cod=a),ui:{base:e(ce)+" text-right"},onChange:K},null,8,["modelValue","ui"]),[[e(X),{mask:"0.99",tokens:{0:{pattern:/[0-9]/,multiple:!0},9:{pattern:/[0-9]/,optional:!0}}}]])])]),t("div",Xo,[ea,t("div",ta,[Z(o(P,{modelValue:e(l).shipping,"onUpdate:modelValue":s[39]||(s[39]=a=>e(l).shipping=a),ui:{base:e(pe)+" text-right"},onChange:K},null,8,["modelValue","ui"]),[[e(X),{mask:"0.99",tokens:{0:{pattern:/[0-9]/,multiple:!0},9:{pattern:/[0-9]/,optional:!0}}}]])])]),t("div",la,[sa,t("div",oa,[o(P,{modelValue:e(l).subtotal,"onUpdate:modelValue":s[40]||(s[40]=a=>e(l).subtotal=a),disabled:"",type:"number",ui:{base:"text-right"}},null,8,["modelValue"])])]),t("div",aa,[na,t("div",ia,[o(P,{modelValue:e(l).total,"onUpdate:modelValue":s[41]||(s[41]=a=>e(l).total=a),disabled:"",type:"number",ui:{base:"text-right"}},null,8,["modelValue"])])])])]),_:1}),t("div",ra,[t("div",da,[o(g,{label:"Terms"},{default:p(()=>[o(z,{modelValue:e(l).terms,"onUpdate:modelValue":s[42]||(s[42]=a=>e(l).terms=a),query:e(l).terms,"onUpdate:query":s[43]||(s[43]=a=>e(l).terms=a),options:e(he)},null,8,["modelValue","query","options"])]),_:1})]),t("div",ua,[o(g,{label:"Check#"},{default:p(()=>[Z(o(P,{modelValue:e(l).checking,"onUpdate:modelValue":s[44]||(s[44]=a=>e(l).checking=a),ui:{base:e(me)},onChange:s[45]||(s[45]=()=>{e(l).checking<4?me.value="outline outline-2 outline-[red]":me.value="outline-none"})},null,8,["modelValue","ui"]),[[e(X),"####"]])]),_:1})])]),o(g,{label:"Credit Card"},{default:p(()=>[t("div",ca,[t("div",pa,[o(w,{label:"Process Credit Card",ui:{base:"justify-center w-full"},onClick:mt})]),t("div",ma,[t("div",fa,[va,t("div",ba,[Z(o(P,{modelValue:e(l).checknoorcreditcardinfo,"onUpdate:modelValue":s[46]||(s[46]=a=>e(l).checknoorcreditcardinfo=a),ui:{base:e(fe)},onChange:s[47]||(s[47]=()=>{e(l).checknoorcreditcardinfo.length<4?fe.value="outline outline-2 outline-[red]":fe.value="outline-none"})},null,8,["modelValue","ui"]),[[e(X),"####"]])])])])])]),_:1}),t("div",ya,[t("div",_a,[o(w,{icon:"i-heroicons-check-badge",label:"Receive Checks",variant:"outline",ui:{base:"min-w-[200px] w-full",truncate:"flex justify-center w-full"},truncate:"",onClick:ct})]),t("div",ha,[o(w,{icon:"i-heroicons-document-text",label:"Save",color:"green",variant:"outline",ui:{base:"min-w-[200px] w-full",truncate:"flex justify-center w-full"},truncate:"",onClick:Je})])])]),xa,t("div",ga,[t("div",ka,[t("div",wa,[o(w,{icon:"i-heroicons-eye",label:"Preview Invoice",variant:"outline",ui:{base:"min-w-[200px] w-full",truncate:"flex justify-center w-full"},truncate:""})]),t("div",Ia,[o(w,{icon:"i-heroicons-eye",label:"Preview Receipt",variant:"outline",ui:{base:"min-w-[200px] w-full",truncate:"flex justify-center w-full"},truncate:""})])]),t("div",Da,[t("div",Ca,[o(w,{icon:"i-heroicons-eye",label:"Preview Back Order",variant:"outline",ui:{base:"min-w-[200px] w-full",truncate:"flex justify-center w-full"},truncate:""})]),t("div",Va,[o(w,{icon:"i-heroicons-eye",label:"Preview Label",variant:"outline",ui:{base:"min-w-[200px] w-full",truncate:"flex justify-center w-full"},truncate:""})])]),t("div",Ua,[o(w,{icon:"i-heroicons-arrow-path-rounded-square",label:"Transfer to Quickbooks",color:"purple",variant:"outline",ui:{base:"min-w-[200px] w-full",truncate:"flex justify-center w-full"},truncate:""})])])])])]),_:1},8,["state"]),o(Te,{modelValue:e(q).isUpdatePriceModalOpen,"onUpdate:modelValue":s[50]||(s[50]=a=>e(q).isUpdatePriceModalOpen=a),ui:{header:{base:"flex flex-row min-h-[0] items-center",padding:"p-0 pt-1"},body:{base:"gap-y-1",padding:"py-0 sm:pt-0"},width:"w-[300px]"}},{default:p(()=>[t("div",null,[t("div",Oa,[Sa,t("div",Ea,[o(P,{type:"number",modelValue:e(W),"onUpdate:modelValue":s[48]||(s[48]=a=>de(W)?W.value=a:null)},null,8,["modelValue"])])]),t("div",Pa,[t("div",$a,[o(w,{label:"OK",ui:{base:"w-full",truncate:"flex justify-center w-full"},truncate:"",onClick:pt})]),t("div",Ma,[o(w,{label:"Cancel",ui:{base:"w-full",truncate:"flex justify-center w-full"},truncate:"",onClick:s[49]||(s[49]=a=>e(q).isUpdatePriceModalOpen=!1)})])])])]),_:1},8,["modelValue"]),o(Te,{modelValue:e(q).isInventoryTransactionModalOpen,"onUpdate:modelValue":s[51]||(s[51]=a=>e(q).isInventoryTransactionModalOpen=a),title:"Inventory Transactions",ui:{title:"text-lg",header:{base:"flex flex-row min-h-[0] items-center",padding:"pt-5 sm:px-9"},body:{base:"gap-y-1",padding:"sm:pt-0 sm:px-9 sm:py-3 sm:pb-5"},width:"w-[1800px] sm:max-w-9xl"}},{default:p(()=>[o(_t,{"selected-order":n.selectedOrder},null,8,["selected-order"])]),_:1},8,["modelValue"]),o(Te,{modelValue:e(q).isCreditCardInfoInputModalOpen,"onUpdate:modelValue":s[61]||(s[61]=a=>e(q).isCreditCardInfoInputModalOpen=a),title:"Payment Details",ui:{header:{base:"flex flex-row min-h-[0] items-center",padding:"p-0 pt-1"},body:{base:"gap-y-1",padding:"py-0 sm:pt-2"},width:"w-[450px]"}},{default:p(()=>[t("div",null,[t("div",null,[o(g,{label:"Amount"},{default:p(()=>[o(P,{type:"number",modelValue:e(O).amount,"onUpdate:modelValue":s[52]||(s[52]=a=>e(O).amount=a),disabled:""},null,8,["modelValue"])]),_:1})]),t("div",Ta,[o(g,{label:"Card Number"},{default:p(()=>[t("div",Ra,[Z(o(P,{modelValue:e(O).cardnumber,"onUpdate:modelValue":s[53]||(s[53]=a=>e(O).cardnumber=a),placeholder:"1234 5678 9012 3456",type:"text",maxlength:19,ui:{base:e(f)},autofocus:"",onChange:s[54]||(s[54]=()=>{if(e(O).cardnumber.length===19)f.value="outline-none";else{f.value="outline outline-2 outline-[red]";return}})},null,8,["modelValue","ui"]),[[e(X),"#### #### #### ####"]])])]),_:1})]),t("div",qa,[o(g,{label:"Expiration Date"},{default:p(()=>[t("div",Na,[t("div",Aa,[Z(o(P,{modelValue:e(O).expirationmonth,"onUpdate:modelValue":s[55]||(s[55]=a=>e(O).expirationmonth=a),placeholder:"MM",type:"number",max:12,min:1,ui:{base:e(m)},onChange:s[56]||(s[56]=()=>{if(e(O).expirationmonth<1||e(O).expirationmonth>13){m.value="outline outline-2 outline-[red]";return}else m.value="outline-none"})},null,8,["modelValue","ui"]),[[e(X),"##"]])]),t("div",ja,[Z(o(P,{modelValue:e(O).expirationyear,"onUpdate:modelValue":s[57]||(s[57]=a=>e(O).expirationyear=a),placeholder:"YYYY",type:"number",ui:{base:e(Q)},onChange:s[58]||(s[58]=()=>{if(e(O).expirationyear<1){Q.value="outline outline-2 outline-[red]";return}else Q.value="outline-none"})},null,8,["modelValue","ui"]),[[e(X),"####"]])])])]),_:1}),o(g,{label:"CV Code"},{default:p(()=>[t("div",Ba,[o(P,{modelValue:e(O).ccv,"onUpdate:modelValue":s[59]||(s[59]=a=>e(O).ccv=a),placeholder:"123",ui:{base:e(A)}},null,8,["modelValue","ui"])])]),_:1})]),t("div",La,[t("div",Fa,[o(w,{label:"OK",ui:{base:"w-full",truncate:"flex justify-center w-full"},truncate:"",onClick:ft})]),t("div",za,[o(w,{label:"Cancel",ui:{base:"w-full",truncate:"flex justify-center w-full"},truncate:"",onClick:s[60]||(s[60]=a=>e(q).isCreditCardInfoInputModalOpen=!1)})])])])]),_:1},8,["modelValue"])],64)}}}),Ya=je(Le),Ha=t("div",{class:"px-4 py-2 gmsPurpleTitlebar"},[t("h2",null,"Sales Lookup")],-1),Ja={class:"flex flex-row space-x-3"},Wa={class:"basis-1/5 min-w-[150px]"},Qa={class:"basis-1/5 min-w-[150px]"},Ka={class:"min-w-[50px] mt-6 shrink-0"},Za={class:"basis-1/5 min-w-[150px]"},Xa={class:"text-center text-bold"},en={key:0,class:"px-4 py-3.5"},tn={key:1,class:"flex justify-center text-center w-[53px]"},ln={class:"w-[50px]"},sn={class:"border-t-[1px] border-gray-200 mb-1 dark:border-gray-800"},on={class:"flex flex-row justify-end mr-20 mt-1"},an="i-heroicons-bars-arrow-up-20-solid",nn="i-heroicons-bars-arrow-down-20-solid",rn="i-heroicons-arrows-up-down-20-solid",In=Ne({__name:"InvoiceList",props:{selectedCustomer:{type:[Number,String,null]},isPage:{type:[Boolean,null]}},emits:["close","link"],setup(b,{emit:i}){kt(()=>{T()});const u=i,n=b,y=wt(),_=Ee(),r=I({defaultColumns:[{key:"UniqueID",label:"Invoice#",sortable:!0,sortDirection:"none",filterable:!0},{key:"orderdate",label:"Order Date",sortable:!0,sortDirection:"none",filterable:!0},{key:"shipdate",label:"Ship Date",sortable:!0,sortDirection:"none",filterable:!0},{key:"customerid",label:"Customer#",sortable:!0,sortDirection:"none",filterable:!0},{key:"customer",label:"Customer",sortable:!0,sortDirection:"none",filterable:!0},{key:"company",label:"Company",sortable:!0,sortDirection:"none",filterable:!0},{key:"zip",label:"Zip",sortable:!0,sortDirection:"none",filterable:!0},{key:"source",label:"Source",sortable:!0,sortDirection:"none",filterable:!0},{key:"sourcedescription",label:"Description",sortable:!0,sortDirection:"none",filterable:!0},{key:"edit",label:"Edit",kind:"actions"},{key:"delete",label:"Delete",kind:"actions"}],page:1,pageSize:50,numberOfOrders:0,orders:[],selectedCustomerId:null,selectedOrderId:null,sort:{column:"UniqueID",direction:"desc"},isLoading:!1}),U=I({isOrderDetailModalOpen:!1,modalTitle:"New Invoice",modalDescription:"Add a new invoice to your database"}),v=I(0),l=new Date,h=new Date(l);h.setMonth(h.getMonth()-1);const x=I({UniqueID:null,orderdate:null,shipdate:null,customerid:n.selectedCustomer??null,customer:null,company:null,lname:null,zip:null,source:null,sourcedescription:null,from:h,to:l,serial:null}),R=I(r.value.defaultColumns),M=I(!1),j=It(()=>r.value.defaultColumns.filter(D=>R.value.includes(D)));Object.entries(y.query).forEach(([D,k])=>{switch(D.toLowerCase()){case"page":r.value.page=Number(k);break;case"pagesize":r.value.pageSize=Number(k);break;case"sortby":r.value.sort.column=k;break;case"sortorder":r.value.sort.direction=k;break}});const T=async()=>{C()},C=async()=>{r.value.isLoading=!0;const D={...x.value};if(!x.value.UniqueID&&!x.value.customer?(x.value.from&&(D.from=x.value.from),x.value.to&&(D.to=new Date(x.value.to.getFullYear(),x.value.to.getMonth(),x.value.to.getDate()+1))):(D.from=null,D.to=null),await $("/api/invoices/numbers",{method:"GET",params:D,onResponse({response:k}){k.status===200&&(r.value.numberOfOrders=k._data.body)}}),r.value.numberOfOrders===0){r.value.orders=[],r.value.numberOfOrders=0,r.value.isLoading=!1;return}r.value.page*r.value.pageSize>r.value.numberOfOrders&&(r.value.page=Math.ceil(r.value.numberOfOrders/r.value.pageSize)),await $("/api/invoices",{method:"GET",params:{page:r.value.page,pageSize:r.value.pageSize,sortBy:r.value.sort.column,sortOrder:r.value.sort.direction,...D},onResponse({response:k}){k.status===200&&(r.value.orders=k._data.body),r.value.isLoading=!1}})},E=D=>{r.value.selectedCustomerId=D==null?void 0:D.customerid,r.value.selectedOrderId=D==null?void 0:D.UniqueID,U.value.isOrderDetailModalOpen=!0},oe=async D=>{await $(`/api/invoices/${D==null?void 0:D.UniqueID}`,{method:"DELETE",onResponse({response:k}){k.status===200&&(_.add({title:"Success",description:k._data.message,icon:"i-heroicons-trash-solid",color:"green"}),C())}})},G=()=>{U.value.isOrderDetailModalOpen=!1},B=async()=>{C()},te=()=>{r.value.page=1,C()},he=async D=>{r.value.page=1;for(const k of j.value)if(k.sortable)if(k.key===D)switch(k.sortDirection){case"none":k.sortDirection="asc",r.value.sort.column=D,r.value.sort.direction="asc";break;case"asc":k.sortDirection="desc",r.value.sort.column=D,r.value.sort.direction="desc";break;default:k.sortDirection="none",r.value.sort.column="UniqueID",r.value.sort.direction="asc";break}else k.sortDirection="none";C()},ue=async(D,k)=>{r.value.page=1,x.value.hasOwnProperty(k)?x.value[k]=D:console.error(`Filter does not have property: ${k}`),C()},le=async()=>{M.value=!0;const D={sortBy:r.value.sort.column,sortOrder:r.value.sort.direction,...x.value},k=Object.entries(D).filter(([J,F])=>F!==null).map(([J,F])=>{if(F!==null)return`${J}=${F}`}).join("&");location.href=`/api/customers/exportlist?${k}`,M.value=!1},L=async D=>{r.value.selectedOrderId=D==null?void 0:D.UniqueID,r.value.selectedCustomerId=D==null?void 0:D.customerid},N=async()=>{r.value.selectedOrderId&&(n.isPage?U.value.isOrderDetailModalOpen=!0:(u("link",r.value.selectedOrderId),u("close")))};return Re(()=>x.value.from,()=>{C()}),Re(()=>x.value.to,()=>{C()}),Re(()=>r.value.orders,()=>{let D=0;for(const k of r.value.orders)D+=k.price;v.value=D}),(D,k)=>{const J=ht,F=Be,ie=Ya,re=Fe,se=Ge,ce=ze,pe=Dt,me=Ct,fe=lt,f=st,m=Ye,Q=Ut,A=xt,O=Ot,q=Ga,W=He;return H(),ee(Ae,null,[o(O,null,{default:p(()=>[o(A,{grow:""},{default:p(()=>[n.isPage?(H(),Qe(J,{key:0,class:"gmsPurpleHeader",title:"Sales"})):Ke("",!0),Ha,o(me,null,{left:p(()=>[t("div",Ja,[t("div",Wa,[o(se,{label:"From",name:"quoteDate"},{default:p(()=>[o(re,{popper:{placement:"bottom-start"}},{panel:p(({close:V})=>[o(ie,{modelValue:e(x).from,"onUpdate:modelValue":k[0]||(k[0]=Y=>e(x).from=Y),"is-required":"",onClose:V},null,8,["modelValue","onClose"])]),default:p(()=>[o(F,{icon:"i-heroicons-calendar-days-20-solid",label:e(x).from?e(ye)(e(x).from,"MM/dd/yyyy"):"Select Date",variant:"outline",ui:{base:"w-full",truncate:"flex justify-center w-full"},truncate:""},null,8,["label"])]),_:1})]),_:1})]),t("div",Qa,[o(se,{label:"To"},{default:p(()=>[o(re,{popper:{placement:"bottom-start"}},{panel:p(({close:V})=>[o(ie,{modelValue:e(x).to,"onUpdate:modelValue":k[1]||(k[1]=Y=>e(x).to=Y),"is-required":"",onClose:V},null,8,["modelValue","onClose"])]),default:p(()=>[o(F,{icon:"i-heroicons-calendar-days-20-solid",label:e(x).to?e(ye)(e(x).to,"MM/dd/yyyy"):"Select Date",variant:"outline",ui:{base:"w-full",truncate:"flex justify-center w-full"},truncate:""},null,8,["label"])]),_:1})]),_:1})]),t("div",Ka,[o(F,{label:"Clear",onClick:k[2]||(k[2]=()=>{e(x).to=null,e(x).from=null}),variant:"outline",class:"text-xs py-2",ui:{base:"w-full",truncate:"flex justify-center w-full"},truncate:""})]),t("div",Za,[o(se,{label:"Serial"},{default:p(()=>[o(ce,{modelValue:e(x).serial,"onUpdate:modelValue":[k[3]||(k[3]=V=>e(x).serial=V),k[4]||(k[4]=V=>te())]},null,8,["modelValue"])]),_:1})]),t("div",null,[o(se,{label:"Total Sales on Search"},{default:p(()=>[t("div",Xa,S(`$${e(v)}`),1)]),_:1})])])]),right:p(()=>[n.isPage?(H(),Qe(F,{key:0,loading:e(M),label:"Export to Excel",color:"gray",onClick:le},{trailing:p(()=>[o(pe,{name:"i-heroicons-document-text",class:"text-green-500 w-5 h-5"})]),_:1},8,["loading"])):Ke("",!0)]),_:1}),o(m,{rows:e(r).orders,columns:e(j),loading:e(r).isLoading,class:"w-full",ui:{divide:"divide-gray-200 dark:divide-gray-800",th:{base:"sticky top-0 z-10",color:"bg-white dark:text-gray dark:bg-[#111827]",padding:"p-0"},td:{base:"h-[41px]",padding:"py-1"}},"empty-state":{icon:"i-heroicons-circle-stack-20-solid",label:"No items."},onSelect:L,onDblclick:N},Ue({"UniqueID-data":p(({row:V})=>[t("div",ln,S(V.UniqueID),1)]),"edit-data":p(({row:V})=>[o(f,{text:"Detail",class:"flex justify-center"},{default:p(()=>[o(F,{color:"gray",variant:"ghost",icon:"i-heroicons-pencil-square",onClick:Y=>E(V)},null,8,["onClick"])]),_:2},1024)]),"delete-data":p(({row:V})=>[o(f,{text:"Delete",class:"flex justify-center"},{default:p(()=>[o(F,{color:"gray",variant:"ghost",icon:"i-heroicons-trash",onClick:Y=>oe(V)},null,8,["onClick"])]),_:2},1024)]),_:2},[Oe(e(j),V=>({name:`${V.key}-header`,fn:p(()=>[V.kind!=="actions"?(H(),ee("div",en,[o(fe,{onHandleSortingButton:he,onHandleInputChange:ue,label:V.label,sortable:V.sortable,"sort-key":V.key,"sort-icon":(V==null?void 0:V.sortDirection)==="none"?rn:(V==null?void 0:V.sortDirection)==="asc"?an:nn,filterable:V.filterable,"filter-key":V.key},null,8,["label","sortable","sort-key","sort-icon","filterable","filter-key"])])):(H(),ee("div",tn,S(V.label),1))])}))]),1032,["rows","columns","loading"]),t("div",sn,[t("div",on,[o(Q,{max:7,"page-count":e(r).pageSize,total:e(r).numberOfOrders|0,modelValue:e(r).page,"onUpdate:modelValue":[k[5]||(k[5]=V=>e(r).page=V),k[6]||(k[6]=V=>B())]},null,8,["page-count","total","modelValue"])])])]),_:1})]),_:1}),o(W,{modelValue:e(U).isOrderDetailModalOpen,"onUpdate:modelValue":k[7]||(k[7]=V=>e(U).isOrderDetailModalOpen=V),title:"Order",ui:{title:"text-lg",header:{base:"flex flex-row min-h-[0] items-center",padding:"pt-5 sm:px-9"},body:{base:"gap-y-1",padding:"sm:pt-0 sm:px-9 sm:py-3 sm:pb-5"},width:"w-[1800px] sm:max-w-9xl"}},{default:p(()=>[o(q,{"selected-customer":e(r).selectedCustomerId,"selected-order":e(r).selectedOrderId,onClose:G},null,8,["selected-customer","selected-order"])]),_:1},8,["modelValue"])],64)}}});export{In as _,Ga as a,hl as b};
