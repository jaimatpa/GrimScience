import{_ as ge,a as Ve}from"./BzVEqXPg.js";import{_ as xe,a as he,b as Se}from"./Crp9aCmO.js";import{_ as Me}from"./N6g2mK6h.js";import{d as ce,r as m,o as h,c as P,f as e,h as l,F as me,s as pe,j as Ce,l as Ee,m as je,i as ke,k as ue,g as o,p as q,e as be,w as s,y as ye,q as De,t as Ie,u as Te,a as $e,V as Re,z as ve,v as Ne,x as Ae}from"./RPcYXXev.js";import{b as fe,a as Le}from"./Be2iH8Rx.js";import{_ as Oe}from"./BQUlXvKt.js";import{_ as He}from"./lE0Kizl1.js";import{_ as We}from"./DHKz6DHT.js";import{_ as we}from"./D923ZLaS.js";import{a as Be}from"./Dw6iTx8h.js";import{_ as qe,a as Qe}from"./CIB32lOs.js";import{_ as ze}from"./E1zpYRWT.js";import{u as y,L as Ge}from"./BqkbertX.js";import{_ as Fe}from"./DBeKXjhb.js";import{_ as Je}from"./CtWjGfD-.js";import{a as Ye,_ as Ke}from"./CZ9EiQCe.js";import{_ as Xe}from"./CFjvF8Jk.js";import{_ as Ze}from"./DmQcjjF8.js";import"./B4XmkEM1.js";import"./BYchAQ3Y.js";import"./DTMMRf-M.js";import"./CBKg8vbb.js";import"./yGFOaDKw.js";import"./C1sp2X5w.js";import"./OsgMrgDf.js";import"./3snQ80t5.js";import"./DFiUDov5.js";import"./rJN6zrQ_.js";const et={class:"flex flex-row space-x-20"},tt={class:"basis-1/2"},ot={class:"basis-1/2"},st={class:"flex justify-end gap-3"},at=ce({__name:"PartsUsed",setup(Q){const j=[{Category:"new",Sub:"Sub Assembly","Part#":"new Part",Description:"new Description",Qty:"1",Cost:"100",Unit:"uni",Amount:"100","Stock Number":"100"},{Category:"new",Sub:"Sub Assembly","Part#":"new Part",Description:"new Description",Qty:"1",Cost:"100",Unit:"uni",Amount:"100","Stock Number":"100"},{Category:"new",Sub:"Sub Assembly","Part#":"new Part",Description:"new Description",Qty:"1",Cost:"100",Unit:"uni",Amount:"100","Stock Number":"100"}],I=[{Qty:"100","Part #":"parts",Description:"this is good product",Cost:"100",Unit:"200",Amount:"1000",NonConformance:"d"},{Qty:"100","Part #":"parts",Description:"this is good product",Cost:"100",Unit:"200",Amount:"1000",NonConformance:"d"},{Qty:"100","Part #":"parts",Description:"this is good product",Cost:"100",Unit:"200",Amount:"1000",NonConformance:"d"}];return m({markets:{label:"Market",filter:"market",options:[]},professions:{label:"Profession",filter:"source",options:[]},categories:{label:"Category",filter:"ParadynamixCatagory",options:[]},conferences:{label:"Conference",filter:"SourceConfrence",options:[]},usstates:{label:"State",filter:"state",api:"/api/common/usstates",options:[]}}),(r,u)=>{const C=ge,f=fe,T=pe;return h(),P(me,null,[e(C,{class:"gmsPurpleTitlebar",title:"Parts used"}),l("div",et,[l("div",tt,[e(f,{rows:j})]),l("div",ot,[e(f,{rows:I})])]),l("div",st,[e(T,{color:"cyan",variant:"outline",type:"submit",label:"Save"})])],64)}}}),lt=De(Fe),nt=De(Ke),it={class:"vl-parent"},rt={class:"flex flex-row space-x-3"},dt={class:"basis-1/5"},ut={class:"basis-1/5"},ct={class:"basis-1/5"},mt={class:"basis-1/5"},pt={class:"basis-1/5"},ft={class:"flex flex-row space-x-3"},_t={class:"basis-1/2"},bt={class:"basis-1/2"},yt={class:"flex flex-row space-x-3"},vt={class:"basis-1/2"},gt={class:"basis-1/2"},xt={class:"flex flex-row space-x-3"},ht={class:"basis-1/2"},Ct={class:"basis-1/2"},kt={key:0},Dt={key:0,class:"Category"},Ot={class:"flex flex-row space-x-2"},wt={class:"grid grid-cols-1 mt-6 h-48"},Pt={class:"flex flex-row space-x-2 mt-2"},Ut={key:1,class:"space-y-3"},Vt={class:"grid grid-cols-1 mt-6 h-48"},St={class:"flex flex-row space-x-4 mt-2"},Mt={class:"grid grid-cols-1 mt-6 h-48 basis-1/2"},Et=l("h2",{class:"font-medium"},"Employee Hours For Selected Operation",-1),jt={class:"basis-1/2"},It={class:"flex flex-row mt-6"},Tt={class:"basis-1/2"},$t=l("h2",{class:"font-medium"},"Rework",-1),Rt=l("div",{class:"mt-3 ml-10"},[l("h2",null,"Rework Cost"),l("h2",null,"$00")],-1),Nt={class:"mt-5 flex justify-center"},At={class:"flex flex-row"},Lt={class:"basis-1/2"},Ht=l("h2",{class:"font-medium"},"Manage Time Entries ",-1),Wt={class:"basis-1/2"},Bt={key:2,class:"space-y-3"},qt={class:"flex justify-end gap-3"},Qt=ce({__name:"MarketingForm",props:{selectedCustomer:{type:[String,Number,null],required:!0},isModal:{type:[Boolean]}},emits:["close","save"],setup(Q,{emit:j}){const I=[{key:"sub",label:"Sub Assembly"},{key:"project",label:"Product Projects"},{key:"Operation",label:"Operations"}],r=[{"#":"1","Completion Date":"dlfakjdsa","Shedule Date":"1564"},{"#":"1","Completion Date":"dlfakjdsa","Shedule Date":"1564"},{"#":"1","Completion Date":"dlfakjdsa","Shedule Date":"1564"},{"#":"1","Completion Date":"dlfakjdsa","Shedule Date":"1564"},{"#":"1","Completion Date":"dlfakjdsa","Shedule Date":"1564"},{"#":"1","Completion Date":"dlfakjdsa","Shedule Date":"1564"}],u=[{"Linked Job #":"1"},{"Linked Job #":"1"},{"Linked Job #":"1"},{"Linked Job #":"1"},{"Linked Job #":"1"},{"Linked Job #":"1"}],C=[{Date:"1",Employee:"emon",Hrs:"1"},{Date:"1",Employee:"emon",Hrs:"1"},{Date:"1",Employee:"emon",Hrs:"1"},{Date:"1",Employee:"emon",Hrs:"1"},{Date:"1",Employee:"emon",Hrs:"1"},{Date:"1",Employee:"emon",Hrs:"1"}],f=[{"#":"1",Week:8,Operation:"Website Wizard Page","Work Center":"54",Hrs:"20","Rework Hours":"dfkalsdf",Verfied:"done"},{po:"PO54654",date:5/5/12,ordered:"2",recieved:"54",Price:"",vender:"dfkalsdf"},{"#":"1",Week:8,Operation:"Website Wizard Page","Work Center":"54",Hrs:"20","Rework Hours":"dfkalsdf",Verfied:"done"},{"#":"1",Week:8,Operation:"Website Wizard Page","Work Center":"54",Hrs:"20","Rework Hours":"dfkalsdf",Verfied:"done"},{"#":"1",Week:8,Operation:"Website Wizard Page","Work Center":"54",Hrs:"20","Rework Hours":"dfkalsdf",Verfied:"done"},{"#":"1",Week:8,Operation:"Website Wizard Page","Work Center":"54",Hrs:"20","Rework Hours":"dfkalsdf",Verfied:"done"}],T=()=>{b.value.isPartsUsed=!0},$=()=>{b.value.isPartLisingModalOpen=!0},z=j,v=Q,R=Ce(),ae=Ee(),N=Ie(),_=m(!1),A=m(!0),U=m([]),L=m([]),H=m([]),G=m([]),F=m([]),J=je({UniqueID:null,market:null,number:null,source:L[0],sourcedescription:null,SourceConfrence:null,fname:null,mi:null,lname:null,title:null,position:null,company1:null,company2:null,country:null,address:null,city:null,state:null,zip:null,workphone:null,homephone:null,cellphone:null,fax:null,email:null,website:null,notes:null,billcompany1:null,billcompany2:null,billcountry:null,billaddress:null,billcity:null,billstate:null,billzip:null,billphone:null,billfax:null,attn:null,adddate:null,ParadynamixCatagory:null,fullname:null,Extension:null,ExtensionBill:null}),Y=["Products","Sub Assembly"],S=m(Y[0]),K=["Serial/Unit","Operation"],W=m(K[0]),n=m([]),t=["Marketing","Accounting","Engineering","Manufacturing"],D=m(t[0]),X=m([]),M=m(),b=m({isPartsUsed:!1,isPartLisingModalOpen:!1,isQuoteDetailModalOpen:!1,isServiceOrderDetailModalOpen:!1,isSiteVisitModalOpen:!1,modalTitle:"New Customer"});ke(()=>{k()});const k=async()=>{le()},le=async()=>{await y("/api/projects/employees",{method:"GET",onResponse({response:i}){i.status===200&&(n.value=i._data.body,console.log("employees",n.value))}})},O=async()=>{_.value=!0,await y(`/api/customers/${v.selectedCustomer}`,{method:"GET",onResponse({response:i}){if(i.status===200){_.value=!1,A.value=!0;for(const d in i._data.body)i._data.body[d]!==void 0&&(J[d]=i._data.body[d])}},onResponseError({}){A.value=!1}}),Z(),_.value=!1},ne=async()=>{console.log("category is",D);try{_.value=!0,await y("/api/projects/subCategory",{method:"GET",params:{subCategory:D.value},onResponse({response:i}){i.status===200?X.value=i._data.body:(U.value=[],console.error("Unexpected response status:",i.status))},onResponseError(i){U.value=[],console.error("API fetch error:",i)}})}catch(i){console.error("Unexpected error:",i)}finally{_.value=!1}},ie=async()=>{console.log("category is",D);try{_.value=!0,await y("/api/projects/parts",{method:"GET",params:{category:D.value,subCategory:M.value},onResponse({response:i}){i.status===200?console.log("parts are",i._data.body):(U.value=[],console.error("Unexpected response status:",i.status))},onResponseError(i){U.value=[],console.error("API fetch error:",i)}})}catch(i){console.error("Unexpected error:",i)}finally{_.value=!1}},Z=async()=>{_.value=!0,await y("/api/customers/markets",{method:"GET",onResponse({response:i}){i.status===200&&(U.value=i._data.body)},onResponseError(){U.value=[]}}),await y("/api/customers/conferences",{method:"GET",onResponse({response:i}){i.status===200&&(G.value=i._data.body)},onResponseError(){G.value=[]}}),await y("/api/customers/categories",{method:"GET",onResponse({response:i}){i.status===200&&(H.value=i._data.body)},onResponseError(){H.value=[]}}),await y("/api/customers/professions",{method:"GET",onResponse({response:i}){i.status===200&&(L.value=i._data.body)},onResponseError(){L.value=[]}}),await y("/api/common/usstates",{method:"GET",onResponse({response:i}){i.status===200&&(F.value=i._data.body)},onResponseError(){F.value=["AL","AK","AZ","AR","CA","CO","CT","DE","FL","GA","HI","ID","IL","IN","IA","KS","KY","LA","ME","MD","MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","OH","OK","OR","PA","RI","SC","SD","TN","TX","UT","VT","VA","WA","WV","WI","WY"]}}),_.value=!1},re=i=>{const d=[];return i.fname||d.push({path:"fname",message:"Please enter your frist name."}),i.lname||d.push({path:"lname",message:"Please enter a your last name."}),i.email||d.push({path:"email",message:"Please enter an email."}),d},V=async()=>{var i;(i=N==null?void 0:N.vnode)!=null&&i.props.onClose?z("close"):ae.go(-1)},B=ue(()=>n.value.map(i=>({label:`${i.fName} ${i.lName}`,value:i.UniqueID}))),de=async i=>{v.selectedCustomer===null?await y("/api/customers",{method:"POST",body:i.data,onResponse({response:d}){d.status===200&&R.add({title:"Success",description:d._data.message,icon:"i-heroicons-check-circle",color:"green"})}}):await y(`/api/customers/${v.selectedCustomer}`,{method:"PUT",body:i.data,onResponse({response:d}){d.status===200&&R.add({title:"Success",description:d._data.message,icon:"i-heroicons-check-circle",color:"green"})}}),z("save")};return v.selectedCustomer!==null?O():Z(),(i,d)=>{const a=lt,g=xe,p=he,w=Je,x=pe,ee=nt,te=Ye,oe=fe,se=Oe,Pe=Xe,Ue=Se,_e=we;return h(),P(me,null,[l("div",it,[e(o(Ge),{active:o(_),"onUpdate:active":d[0]||(d[0]=c=>q(_)?_.value=c:null),"is-full-page":!0,color:"#000000",backgroundColor:"#1B2533",loader:"dots"},null,8,["active"])]),!v.isModal&&!o(A)?(h(),be(a,{key:0,name:"Customer not found",message:"The customer you are looking for does not exist",to:"/customers/customers/list"})):(h(),be(Ue,{key:1,validate:re,"validate-on":["submit"],state:o(J),class:"space-y-4",onSubmit:de},{default:s(()=>[l("div",rt,[l("div",dt,[e(p,{label:"Project#",name:"Project#"},{default:s(()=>[e(g)]),_:1})]),l("div",ut,[e(p,{label:"Project Qty.",name:"PName"},{default:s(()=>[e(g)]),_:1})]),l("div",ct,[e(p,{label:"ProjectType",name:"PType"},{default:s(()=>[e(w,{modelValue:o(S),"onUpdate:modelValue":d[1]||(d[1]=c=>q(S)?S.value=c:null),options:Y},null,8,["modelValue"])]),_:1})]),l("div",mt,[e(p,{label:"Lastest Cost",name:"LCost"},{default:s(()=>[e(g)]),_:1})]),l("div",pt,[e(p,{label:"Relieve Inventory Per:",name:"RelieveI"},{default:s(()=>[e(w,{modelValue:o(W),"onUpdate:modelValue":d[2]||(d[2]=c=>q(W)?W.value=c:null),options:K},null,8,["modelValue"])]),_:1})])]),l("div",ft,[l("div",_t,[e(p,{label:"Date Opened",name:"DOpened"},{default:s(()=>[e(te,{popper:{placement:"bottom-start"}},{panel:s(({close:c})=>[e(ee,{"is-required":"",onClose:c},null,8,["onClose"])]),default:s(()=>[e(x,{icon:"i-heroicons-calendar-days-20-solid",variant:"outline",ui:{base:"w-full",truncate:"flex justify-center w-full"},truncate:""})]),_:1})]),_:1})]),l("div",bt,[e(p,{label:"By",name:"By"},{default:s(()=>[e(w,{options:o(B)},null,8,["options"])]),_:1})])]),l("div",yt,[l("div",vt,[e(p,{label:"Ready To Produce",name:"RTOProduce"},{default:s(()=>[e(te,{popper:{placement:"bottom-start"}},{panel:s(({close:c})=>[e(ee,{"is-required":"",onClose:c},null,8,["onClose"])]),default:s(()=>[e(x,{icon:"i-heroicons-calendar-days-20-solid",variant:"outline",ui:{base:"w-full",truncate:"flex justify-center w-full"},truncate:""})]),_:1})]),_:1})]),l("div",gt,[e(p,{label:"By",name:"By"},{default:s(()=>[e(w,{options:o(B)},null,8,["options"])]),_:1})])]),l("div",xt,[l("div",ht,[e(p,{label:"Project Closed",name:"PClosed"},{default:s(()=>[e(te,{popper:{placement:"bottom-start"}},{panel:s(({close:c})=>[e(ee,{"is-required":"",onClose:c},null,8,["onClose"])]),default:s(()=>[e(x,{icon:"i-heroicons-calendar-days-20-solid",variant:"outline",ui:{base:"w-full",truncate:"flex justify-center w-full"},truncate:""})]),_:1})]),_:1})]),l("div",Ct,[e(p,{label:"By",name:"By"},{default:s(()=>[e(w,{options:o(B)},null,8,["options"])]),_:1})])]),o(S)==="Sub Assembly"?(h(),P("div",kt,[e(Pe,{items:I,class:"w-full"},{item:s(({item:c})=>[c.key==="sub"?(h(),P("div",Dt,[l("div",Ot,[e(p,{label:"Category",class:"basis-1/2",name:"Category"},{default:s(()=>[e(w,{onChange:ne,modelValue:o(D),"onUpdate:modelValue":d[3]||(d[3]=E=>q(D)?D.value=E:null),options:t},null,8,["modelValue"])]),_:1}),e(p,{label:"Sub Category",class:"basis-1/2",name:"Sub Category"},{default:s(()=>[e(w,{options:o(X),modelValue:o(M),"onUpdate:modelValue":d[4]||(d[4]=E=>q(M)?M.value=E:null),onChange:ie},null,8,["options","modelValue"])]),_:1})]),e(p,{label:"Part",name:"Part",class:"mt-2"},{default:s(()=>[e(w)]),_:1}),l("div",wt,[e(oe,{rows:r})]),l("div",Pt,[e(p,{label:"Qty",class:"basis-1/2",name:"Qty"},{default:s(()=>[e(g)]),_:1}),e(p,{class:"basis-1/2 mt-6"},{default:s(()=>[e(te,{popper:{placement:"bottom-start"}},{panel:s(({close:E})=>[e(ee,{"is-required":"",onClose:E},null,8,["onClose"])]),default:s(()=>[e(x,{icon:"i-heroicons-calendar-days-20-solid",variant:"outline",ui:{base:"w-full",truncate:"flex justify-center w-full"},truncate:""})]),_:1})]),_:1})])])):c.key==="Operation"?(h(),P("div",Ut,[l("div",Vt,[e(oe,{rows:f})]),l("div",St,[l("div",Mt,[Et,e(oe,{rows:C})]),l("div",jt,[l("div",It,[l("div",Tt,[$t,e(se,{text:"Edit"},{default:s(()=>[e(x,{color:"cyan",variant:"outline",icon:"i-heroicons-pencil-square",type:"submit",label:"Rework Parts",onClick:d[5]||(d[5]=E=>T())})]),_:1}),e(p,{label:"Hours",name:"Hours",class:"mt-3"},{default:s(()=>[e(g)]),_:1})]),Rt]),l("div",Nt,[e(se,{text:"Edit"},{default:s(()=>[e(x,{color:"green",variant:"outline",icon:"i-heroicons-plus",type:"submit",label:"Verify  & Close Operation"})]),_:1})])])]),l("div",At,[l("div",Lt,[Ht,e(se,{text:"Edit"},{default:s(()=>[e(x,{class:"text-[#1c96c5]",variant:"outline",icon:"i-heroicons-pencil-square",type:"submit",label:"Move Selected Entries to Operation:"})]),_:1})]),l("div",Wt,[e(p,{label:"Destination Operation",name:"Destination"},{default:s(()=>[e(w)]),_:1})])])])):c.key==="project"?(h(),P("div",Bt,[e(oe,{rows:u})])):ye("",!0)]),_:1})])):ye("",!0),l("div",qt,[e(se,{text:"Edit"},{default:s(()=>[e(x,{color:"red",variant:"outline",label:Q.isModal?"Cancel":"Go back",onClick:V},null,8,["label"]),e(x,{class:"text-[#1c96c5] ml-3",variant:"outline",icon:"i-heroicons-magnifying-glass",type:"submit",label:"View Instructions"}),e(x,{class:"text-[#1c96c5] ml-3",variant:"outline",icon:"i-heroicons-magnifying-glass",type:"submit",label:"View Parts Listing",onClick:d[6]||(d[6]=c=>$())})]),_:1}),e(x,{color:"cyan",variant:"outline",type:"submit",label:"Save"})])]),_:1},8,["state"])),e(_e,{modelValue:o(b).isPartsUsed,"onUpdate:modelValue":d[8]||(d[8]=c=>o(b).isPartsUsed=c),ui:{title:"text-lg",header:{base:"flex flex-row min-h-[0] items-center",padding:"pt-5 sm:px-9"},body:{base:"gap-y-1",padding:"sm:pt-0 sm:px-9 sm:py-3 sm:pb-10"},width:"w-[1500px] sm:max-w-9xl"}},{default:s(()=>[e(at,{onClose:d[7]||(d[7]=c=>o(b).isPartsUsed=!0)})]),_:1},8,["modelValue"]),e(_e,{modelValue:o(b).isPartLisingModalOpen,"onUpdate:modelValue":d[10]||(d[10]=c=>o(b).isPartLisingModalOpen=c),ui:{title:"text-lg",header:{base:"flex flex-row min-h-[0] items-center",padding:"pt-5 sm:px-9"},body:{base:"gap-y-1",padding:"sm:pt-0 sm:px-9 sm:py-3 sm:pb-5"},width:"w-[1500px] sm:max-w-9xl"}},{default:s(()=>[e(Ze,{onClose:d[9]||(d[9]=c=>o(b).isPartLisingModalOpen=!0)})]),_:1},8,["modelValue"])],64)}}}),zt=l("div",{class:"px-4 py-2 gmsBlueTitlebar"},[l("h2",null,"Projects List")],-1),Gt={class:"flex justify-between m-2"},Ft={class:"flex items-center space-x-3"},Jt={class:"flex items-center space-x-11"},Yt={class:"mr-5"},Kt={key:0,class:"px-4 py-3.5"},Xt={key:1,class:"flex justify-center text-center w-[53px]"},Zt={class:"border-t-[1px] border-gray-200 mb-1 dark:border-gray-800"},eo={class:"flex flex-row justify-end mr-20 mt-1"},to="i-heroicons-bars-arrow-up-20-solid",oo="i-heroicons-bars-arrow-down-20-solid",so="i-heroicons-arrows-up-down-20-solid",jo=ce({__name:"projects",setup(Q){ke(()=>{z()}),Te({title:"Grimm-Marketing projects"});const j=$e(),I=Ce(),r=m({defaultColumns:[{key:"NUMBER",label:"Project#",sortable:!0,sortDirection:"none",filterable:!0},{key:"QUANTITY",label:"Qty.",sortable:!0,sortDirection:"none",filterable:!0},{key:"MODEL ",label:"Description",sortable:!0,sortDirection:"none",filterable:!0},{key:"PerType",label:"type",sortable:!0,sortDirection:"none",filterable:!0},{key:"DATEOPENED",label:"Opened",sortable:!0,sortDirection:"none",filterable:!0},{key:"DATECLOSED",label:"Closed",sortable:!1,sortDirection:"none",filterable:!1},{key:"PercentageComplete",label:"% Complete",sortable:!1,sortDirection:"none",filterable:!1},{key:"Cost",label:"ProjectCost",sortable:!1,sortDirection:"none",filterable:!1},{key:"delete",label:"Del",kind:"actions"}],page:1,pageSize:50,numberOfProjects:0,projects:[],selectedCustomerId:null,sort:{column:"UniqueID",direction:"asc"},isLoading:!1}),u=m({isPartsUsed:!1,isCustomerModalOpen:!1,isOrderDetailModalOpen:!1,isQuoteDetailModalOpen:!1,isServiceOrderDetailModalOpen:!1,isSiteVisitModalOpen:!1,modalTitle:"New Customer"}),C=m({NUMBER:null,QUANTITY:null,MODEL:null,PerType:null,DATEOPENED:null,PercentageComplete:null,Cost:null,selectedOptions:[]}),f=m({Marketing:!1,Accounting:!1,Engineering:!1,Manufacturing:!1,ShowOpenOnly:!1}),T=m(r.value.defaultColumns);m(!1);const $=ue(()=>r.value.defaultColumns.filter(n=>T.value.includes(n)));Object.entries(j.query).forEach(([n,t])=>{switch(n.toLowerCase()){case"page":r.value.page=Number(t);break;case"pagesize":r.value.pageSize=Number(t);break;case"sortby":r.value.sort.column=t;break;case"sortorder":r.value.sort.direction=t;break}});const z=async()=>{v()},v=async()=>{if(r.value.isLoading=!0,await y("/api/projects/numbers",{method:"GET",params:{...C.value},onResponse({response:n}){n.status===200&&(r.value.numberOfProjects=n._data.body,console.log("number of projects",n._data.body))}}),r.value.numberOfProjects===0){r.value.projects=[],r.value.numberOfProjects=0,r.value.isLoading=!1;return}r.value.page*r.value.pageSize>r.value.numberOfProjects&&(r.value.page=Math.ceil(r.value.numberOfProjects/r.value.pageSize)|1),console.log("filer",C.value),await y("/api/projects/",{method:"GET",params:{page:r.value.page,pageSize:r.value.pageSize,sortBy:r.value.sort.column,sortOrder:r.value.sort.direction,...C.value},onResponse({response:n}){n.status===200&&(r.value.projects=n._data.body,console.log("updated for marking",n._data.body)),r.value.isLoading=!1}})},R=ue(()=>Object.entries(f.value).filter(([n,t])=>t).map(([n])=>n));Re(R,n=>{C.value.selectedOptions=n,v()});const ae=n=>{r.value.selectedCustomerId=n==null?void 0:n.UniqueID,u.value.modalTitle="Edit",u.value.isCustomerModalOpen=!0},N=n=>{r.value.selectedCustomerId=n==null?void 0:n.UniqueID,u.value.isOrderDetailModalOpen=!0},_=n=>{r.value.selectedCustomerId=n==null?void 0:n.UniqueID,u.value.isQuoteDetailModalOpen=!0},A=n=>{r.value.selectedCustomerId=n==null?void 0:n.UniqueID,u.value.isServiceOrderDetailModalOpen=!0},U=n=>{r.value.selectedCustomerId=n==null?void 0:n.UniqueID,u.value.isSiteVisitModalOpen=!0},L=async n=>{await y(`/api/jobs/${n==null?void 0:n.UniqueID}`,{method:"DELETE",onResponse({response:t}){t.status===200&&(I.add({title:"Success",description:t._data.message,icon:"i-heroicons-trash-solid",color:"green"}),v())}})},H=()=>{u.value.isCustomerModalOpen=!1},G=async()=>{H(),v()},F=async()=>{v()},J=async n=>{r.value.page=1;for(const t of $.value)if(t.sortable)if(t.key===n)switch(t.sortDirection){case"none":t.sortDirection="asc",r.value.sort.column=n,r.value.sort.direction="asc";break;case"asc":t.sortDirection="desc",r.value.sort.column=n,r.value.sort.direction="desc";break;default:t.sortDirection="none",r.value.sort.column="UniqueID",r.value.sort.direction="asc";break}else t.sortDirection="none";v()},Y=async(n,t)=>{r.value.page=1,C.value.hasOwnProperty(t)?C.value[t]=n:console.error(`Filter does not have property: ${t}`),v()},S=async n=>{r.value.selectedCustomerId=n==null?void 0:n.UniqueID},K=async()=>{r.value.selectedCustomerId&&(u.value.modalTitle="Edit",u.value.isCustomerModalOpen=!0)},W=()=>{u.value.isCustomerModalOpen=!0,u.value.modalTitle="New Project"};return(n,t)=>{const D=ge,X=xe,M=he,b=Me,k=pe,le=Le,O=Oe,ne=fe,ie=He,Z=Ve,re=We,V=we,B=Be,de=qe,i=ze,d=Qe;return h(),P(me,null,[e(re,null,{default:s(()=>[e(Z,{grow:""},{default:s(()=>[e(D,{class:"gmsBlueHeader",title:"Projects"}),zt,l("div",Gt,[l("div",Ft,[e(M,{label:"Number of Search Items To Return",name:"zip",class:"flex items-center space-x-4"},{default:s(()=>[e(X,{class:"inline-block"})]),_:1})]),l("div",Jt,[l("div",null,[e(b,{label:"Marketing",modelValue:o(f).Marketing,"onUpdate:modelValue":t[0]||(t[0]=a=>o(f).Marketing=a)},null,8,["modelValue"])]),l("div",null,[e(b,{label:"Accounting",modelValue:o(f).Accounting,"onUpdate:modelValue":t[1]||(t[1]=a=>o(f).Accounting=a)},null,8,["modelValue"])]),l("div",null,[e(b,{label:"Engineering",modelValue:o(f).Engineering,"onUpdate:modelValue":t[2]||(t[2]=a=>o(f).Engineering=a)},null,8,["modelValue"])]),l("div",null,[e(b,{label:"Manufacturing",modelValue:o(f).Manufacturing,"onUpdate:modelValue":t[3]||(t[3]=a=>o(f).Manufacturing=a)},null,8,["modelValue"])]),l("div",null,[e(b,{label:"Show Open Only",modelValue:o(f).ShowOpenOnly,"onUpdate:modelValue":t[4]||(t[4]=a=>o(f).ShowOpenOnly=a)},null,8,["modelValue"])]),l("div",null,[l("p",null,"Selected Options: "+ve(o(R).join(", ")),1)])]),l("div",null,[l("div",Yt,[e(k,{color:"green",variant:"outline",type:"submit",label:"New Project",onClick:t[5]||(t[5]=a=>W())})])])]),e(ne,{rows:o(r).projects,columns:o($),loading:o(r).isLoading,class:"w-full",ui:{divide:"divide-gray-200 dark:divide-gray-800",th:{base:"sticky top-0 z-10",color:"bg-white dark:text-gray dark:bg-[#111827]",padding:"p-0"},td:{padding:"py-1"}},"empty-state":{icon:"i-heroicons-circle-stack-20-solid",label:"No items."},onSelect:S,onDblclick:K},Ne({"label-data":s(({row:a})=>[e(O,{text:"Label",class:"flex justify-center"},{default:s(()=>[e(k,{color:"gray",variant:"ghost",icon:"i-heroicons-tag",onClick:t[6]||(t[6]=()=>{})})]),_:1})]),"order-data":s(({row:a})=>[e(O,{text:"Order",class:"flex justify-center"},{default:s(()=>[e(k,{color:"gray",variant:"ghost",icon:"i-heroicons-shopping-cart",onClick:g=>N(a)},null,8,["onClick"])]),_:2},1024)]),"quote-data":s(({row:a})=>[e(O,{text:"Quote",class:"flex justify-center"},{default:s(()=>[e(k,{color:"gray",variant:"ghost",icon:"i-heroicons-currency-dollar",onClick:g=>_(a)},null,8,["onClick"])]),_:2},1024)]),"serviceOrder-data":s(({row:a})=>[e(O,{text:"Service Order",class:"flex justify-center"},{default:s(()=>[e(k,{color:"gray",variant:"ghost",icon:"i-heroicons-chat-bubble-left-ellipsis",onClick:g=>A(a)},null,8,["onClick"])]),_:2},1024)]),"siteVisit-data":s(({row:a})=>[e(O,{text:"Site Visit",class:"flex justify-center"},{default:s(()=>[e(k,{color:"gray",variant:"ghost",icon:"i-heroicons-clipboard-document-list",onClick:g=>U(a)},null,8,["onClick"])]),_:2},1024)]),"edit-data":s(({row:a})=>[e(O,{text:"Edit",class:"flex justify-center"},{default:s(()=>[e(k,{color:"gray",variant:"ghost",icon:"i-heroicons-pencil-square",onClick:g=>ae(a)},null,8,["onClick"])]),_:2},1024)]),"delete-data":s(({row:a})=>[e(O,{text:"Delete",class:"flex justify-center"},{default:s(()=>[e(k,{color:"gray",variant:"ghost",icon:"i-heroicons-trash",onClick:g=>L(a)},null,8,["onClick"])]),_:2},1024)]),_:2},[Ae(o($),a=>({name:`${a.key}-header`,fn:s(()=>[a.kind!=="actions"?(h(),P("div",Kt,[e(le,{onHandleSortingButton:J,onHandleInputChange:Y,label:a.label,sortable:a.sortable,"sort-key":a.key,"sort-icon":(a==null?void 0:a.sortDirection)==="none"?so:(a==null?void 0:a.sortDirection)==="asc"?to:oo,filterable:a.filterable,"filter-key":a.key},null,8,["label","sortable","sort-key","sort-icon","filterable","filter-key"])])):(h(),P("div",Xt,ve(a.label),1))])}))]),1032,["rows","columns","loading"]),l("div",Zt,[l("div",eo,[e(ie,{max:7,"page-count":o(r).pageSize,total:o(r).numberOfProjects|0,modelValue:o(r).page,"onUpdate:modelValue":[t[7]||(t[7]=a=>o(r).page=a),t[8]||(t[8]=a=>F())]},null,8,["page-count","total","modelValue"])])])]),_:1})]),_:1}),e(V,{modelValue:o(u).isCustomerModalOpen,"onUpdate:modelValue":t[9]||(t[9]=a=>o(u).isCustomerModalOpen=a),title:o(u).modalTitle,ui:{title:"text-lg",header:{base:"flex flex-row min-h-[0] items-center",padding:"pt-5 sm:px-9"},body:{base:"gap-y-1",padding:"sm:pt-0 sm:px-9 sm:py-3 sm:pb-5"},width:"w-[1000px] sm:max-w-9xl"}},{default:s(()=>[e(Qt,{onClose:H,onSave:G,"selected-customer":o(r).selectedCustomerId,"is-modal":!0},null,8,["selected-customer"])]),_:1},8,["modelValue","title"]),e(V,{modelValue:o(u).isOrderDetailModalOpen,"onUpdate:modelValue":t[11]||(t[11]=a=>o(u).isOrderDetailModalOpen=a),title:"Invoice",ui:{title:"text-lg",header:{base:"flex flex-row min-h-[0] items-center",padding:"pt-5 sm:px-9"},body:{base:"gap-y-1",padding:"sm:pt-0 sm:px-9 sm:py-3 sm:pb-5"},width:"w-[1800px] sm:max-w-9xl"}},{default:s(()=>[e(B,{"selected-customer":o(r).selectedCustomerId,onClose:t[10]||(t[10]=a=>o(u).isOrderDetailModalOpen=!1)},null,8,["selected-customer"])]),_:1},8,["modelValue"]),e(V,{modelValue:o(u).isQuoteDetailModalOpen,"onUpdate:modelValue":t[12]||(t[12]=a=>o(u).isQuoteDetailModalOpen=a),title:"Quote",ui:{title:"text-lg",header:{base:"flex flex-row min-h-[0] items-center",padding:"pt-5 sm:px-9"},body:{base:"gap-y-1",padding:"sm:pt-0 sm:px-9 sm:py-3 sm:pb-5"},width:"w-[1000px] sm:max-w-7xl"}},{default:s(()=>[e(de,{"selected-customer":o(r).selectedCustomerId},null,8,["selected-customer"])]),_:1},8,["modelValue"]),e(V,{modelValue:o(u).isServiceOrderDetailModalOpen,"onUpdate:modelValue":t[13]||(t[13]=a=>o(u).isServiceOrderDetailModalOpen=a),title:"Service Order",ui:{title:"text-lg",header:{base:"flex flex-row min-h-[0] items-center",padding:"pt-5 sm:px-9"},body:{base:"gap-y-1",padding:"sm:pt-0 sm:px-9 sm:py-3 sm:pb-5"},width:"w-[1800px] sm:max-w-9xl"}},{default:s(()=>[e(i,{"selected-customer":o(r).selectedCustomerId},null,8,["selected-customer"])]),_:1},8,["modelValue"]),e(V,{modelValue:o(u).isSiteVisitModalOpen,"onUpdate:modelValue":t[14]||(t[14]=a=>o(u).isSiteVisitModalOpen=a),title:"Site Visit",ui:{title:"text-lg",header:{base:"flex flex-row min-h-[0] items-center",padding:"pt-5 sm:px-9"},body:{base:"gap-y-1",padding:"sm:pt-0 sm:px-9 sm:py-3 sm:pb-5"},width:"w-[1800px] sm:max-w-9xl"}},{default:s(()=>[e(d,{"selected-customer":o(r).selectedCustomerId},null,8,["selected-customer"])]),_:1},8,["modelValue"]),e(V,{modelValue:o(u).isPartsUsed,"onUpdate:modelValue":t[15]||(t[15]=a=>o(u).isPartsUsed=a),ui:{title:"text-lg",header:{base:"flex flex-row min-h-[0] items-center",padding:"pt-5 sm:px-9"},body:{base:"gap-y-1",padding:"sm:pt-0 sm:px-9 sm:py-3 sm:pb-10"},width:"w-[1500px] sm:max-w-9xl"}},null,8,["modelValue"])],64)}}});export{jo as default};
