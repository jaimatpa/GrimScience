import{r as T,b8 as b,V as C,aH as j,au as O,cb as D,cc as R,a_ as I}from"./RPcYXXev.js";function x(e,o){if(typeof e!="string")throw new TypeError("argument str must be a string");const i={},t=o||{},c=t.decode||N;let a=0;for(;a<e.length;){const r=e.indexOf("=",a);if(r===-1)break;let n=e.indexOf(";",a);if(n===-1)n=e.length;else if(n<r){a=e.lastIndexOf(";",r-1)+1;continue}const f=e.slice(a,r).trim();if(t!=null&&t.filter&&!(t!=null&&t.filter(f))){a=n+1;continue}if(i[f]===void 0){let s=e.slice(r+1,n).trim();s.codePointAt(0)===34&&(s=s.slice(1,-1)),i[f]=P(s,c)}a=n+1}return i}function N(e){return e.includes("%")?decodeURIComponent(e):e}function P(e,o){try{return o(e)}catch{return e}}const y=/^[\u0009\u0020-\u007E\u0080-\u00FF]+$/;function S(e,o,i){const t=i||{},c=t.encode||encodeURIComponent;if(typeof c!="function")throw new TypeError("option encode is invalid");if(!y.test(e))throw new TypeError("argument name is invalid");const a=c(o);if(a&&!y.test(a))throw new TypeError("argument val is invalid");let r=e+"="+a;if(t.maxAge!==void 0&&t.maxAge!==null){const n=t.maxAge-0;if(Number.isNaN(n)||!Number.isFinite(n))throw new TypeError("option maxAge is invalid");r+="; Max-Age="+Math.floor(n)}if(t.domain){if(!y.test(t.domain))throw new TypeError("option domain is invalid");r+="; Domain="+t.domain}if(t.path){if(!y.test(t.path))throw new TypeError("option path is invalid");r+="; Path="+t.path}if(t.expires){if(!L(t.expires)||Number.isNaN(t.expires.valueOf()))throw new TypeError("option expires is invalid");r+="; Expires="+t.expires.toUTCString()}if(t.httpOnly&&(r+="; HttpOnly"),t.secure&&(r+="; Secure"),t.priority)switch(typeof t.priority=="string"?t.priority.toLowerCase():t.priority){case"low":{r+="; Priority=Low";break}case"medium":{r+="; Priority=Medium";break}case"high":{r+="; Priority=High";break}default:throw new TypeError("option priority is invalid")}if(t.sameSite)switch(typeof t.sameSite=="string"?t.sameSite.toLowerCase():t.sameSite){case!0:{r+="; SameSite=Strict";break}case"lax":{r+="; SameSite=Lax";break}case"strict":{r+="; SameSite=Strict";break}case"none":{r+="; SameSite=None";break}default:throw new TypeError("option sameSite is invalid")}return t.partitioned&&(r+="; Partitioned"),r}function L(e){return Object.prototype.toString.call(e)==="[object Date]"||e instanceof Date}function u(e){if(typeof e!="object")return e;var o,i,t=Object.prototype.toString.call(e);if(t==="[object Object]"){if(e.constructor!==Object&&typeof e.constructor=="function"){i=new e.constructor;for(o in e)e.hasOwnProperty(o)&&i[o]!==e[o]&&(i[o]=u(e[o]))}else{i={};for(o in e)o==="__proto__"?Object.defineProperty(i,o,{value:u(e[o]),configurable:!0,enumerable:!0,writable:!0}):i[o]=u(e[o])}return i}if(t==="[object Array]"){for(o=e.length,i=Array(o);o--;)i[o]=u(e[o]);return i}return t==="[object Set]"?(i=new Set,e.forEach(function(c){i.add(u(c))}),i):t==="[object Map]"?(i=new Map,e.forEach(function(c,a){i.set(u(a),u(c))}),i):t==="[object Date]"?new Date(+e):t==="[object RegExp]"?(i=new RegExp(e.source,e.flags),i.lastIndex=e.lastIndex,i):t==="[object DataView]"?new e.constructor(u(e.buffer)):t==="[object ArrayBuffer]"?e.slice(0):t.slice(-6)==="Array]"?new e.constructor(e):e}const M={path:"/",watch:!0,decode:e=>D(decodeURIComponent(e)),encode:e=>encodeURIComponent(typeof e=="string"?e:JSON.stringify(e))},g=window.cookieStore;function B(e,o){var f;const i={...M,...o},t=k(i)||{};let c;i.maxAge!==void 0?c=i.maxAge*1e3:i.expires&&(c=i.expires.getTime()-Date.now());const a=c!==void 0&&c<=0,r=u(a?void 0:t[e]??((f=i.default)==null?void 0:f.call(i))),n=c&&!a?H(r,c,i.watch&&i.watch!=="shallow"):T(r);{let s=null;try{!g&&typeof BroadcastChannel<"u"&&(s=new BroadcastChannel(`nuxt:cookies:${e}`))}catch{}const l=()=>{i.readonly||R(n.value,t[e])||(U(e,n.value,i),t[e]=u(n.value),s==null||s.postMessage({value:i.encode(n.value)}))},p=d=>{var w;const h=d.refresh?(w=k(i))==null?void 0:w[e]:i.decode(d.value);m=!0,n.value=h,t[e]=u(h),I(()=>{m=!1})};let m=!1;const v=!!j();if(v&&b(()=>{m=!0,l(),s==null||s.close()}),g){const d=h=>{const w=h.changed.find(A=>A.name===e);w&&p({value:w.value})};g.addEventListener("change",d),v&&b(()=>g.removeEventListener("change",d))}else s&&(s.onmessage=({data:d})=>p(d));i.watch?C(n,()=>{m||l()},{deep:i.watch!=="shallow"}):l()}return n}function k(e={}){return x(document.cookie,e)}function _(e,o,i={}){return o==null?S(e,o,{...i,maxAge:-1}):S(e,o,i)}function U(e,o,i={}){document.cookie=_(e,o,i)}const E=2147483647;function H(e,o,i){let t,c,a=0;const r=i?T(e):{value:e};return j()&&b(()=>{c==null||c(),clearTimeout(t)}),O((n,f)=>{i&&(c=C(r,f));function s(){a=0,clearTimeout(t);const l=o-a,p=l<E?l:E;t=setTimeout(()=>{if(a+=p,a<o)return s();r.value=void 0,f()},p)}return{get(){return n(),r.value},set(l){s(),r.value=l,f()}}})}export{B as u};
