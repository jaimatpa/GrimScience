import{_ as ce,a as fe}from"./BzVEqXPg.js";import{_ as X,a as _e,b as ye}from"./Be2iH8Rx.js";import{a as ee,_ as be,b as ve}from"./Crp9aCmO.js";import{d as le,r as V,j as oe,l as Ve,m as Z,o as h,c as k,h as a,f as l,g as e,p as ae,w as n,F as K,x as te,q as xe,B as Ee,s as se,t as ge,i as Ce,u as he,a as ke,k as we,z as J,v as Ue}from"./RPcYXXev.js";import{_ as Ae}from"./yGFOaDKw.js";import{_ as De}from"./BQUlXvKt.js";import{_ as Se}from"./lE0Kizl1.js";import{_ as Oe}from"./DHKz6DHT.js";import{_ as Te}from"./CtWjGfD-.js";import{f as G,_ as Pe,a as Ie}from"./CZ9EiQCe.js";import{_ as Me}from"./N6g2mK6h.js";import{_ as We}from"./C1sp2X5w.js";import{_ as Ne}from"./CFjvF8Jk.js";import{_ as He}from"./jqS0N42u.js";import{_ as ne}from"./D923ZLaS.js";import{L as Le,u as U}from"./BqkbertX.js";import"./B4XmkEM1.js";import"./BYchAQ3Y.js";import"./DTMMRf-M.js";import"./CBKg8vbb.js";import"./DFiUDov5.js";import"./rJN6zrQ_.js";const Re=xe(Pe),$e={class:"vl-parent"},je={class:"flex gap-5"},Fe={class:"w-3/4 flex flex-col space-y-4"},Be={class:"flex flex-row space-x-3"},qe={class:"basis-1/5"},ze={class:"basis-1/5"},Ye={class:"basis-1/5"},Ge={class:"basis-1/5"},Ke={class:"basis-1/4"},Qe={class:"basis-1/4"},Ze={class:"basis-1/4"},Je={class:"flex flex-row space-x-3"},Xe={class:"basis-1/5"},el={class:"basis-1/4"},ll={class:"basis-1/4"},ol={class:"basis-1/4"},al={class:"basis-1/4"},tl={class:"basis-1/4"},sl={class:"basis-1/4 flex items-center justify-start gap-3 text-center"},nl=a("div",{class:"flex flex-row"},[a("div",{class:"basis-1/2 text-center"},"Address Information"),a("div",{class:"basis-1/2 text-center"},"Personal Information")],-1),il={class:"flex flex-row space-x-5"},dl={class:"basis-1/2"},ul={class:"flex flex-col space-y-2"},rl={class:"flex flex-row space-x-3"},ml={class:"w-full"},pl={class:"flex flex-row space-x-3"},cl={class:"basis-1/2"},fl={class:"basis-1/4"},_l={class:"basis-1/4"},yl={class:"flex flex-row space-x-3"},bl={class:"basis-1/2"},vl={class:"basis-1/2"},Vl={class:"basis-1/2"},xl={class:"flex flex-col space-y-2"},El={class:"flex flex-row space-x-3"},gl={class:"basis-1/2"},Cl={class:"basis-1/2"},hl={class:"flex flex-row space-x-3"},kl={class:"basis-1/2"},wl={class:"basis-1/2"},Ul={class:"flex flex-row space-x-3"},Al={class:"basis-1/2"},Dl={class:"basis-1/2"},Sl={class:"w-1/4"},Ol={class:"basis-1/5 mt-5"},Tl=a("div",{class:"w-full bg-slate-400 px-3 py-1 mt-6"}," Company Information ",-1),Pl={class:"flex flex-row space-x-3 mt-3"},Il={class:"basis-3/5"},Ml={class:"basis-2/5"},Wl={class:"mt-3"},Nl={class:"flex flex-row space-x-3"},Hl={class:"basis-2/6"},Ll={class:"basis-2/6"},Rl={class:"basis-2/6"},$l={class:"flex flex-row space-x-3 mt-3"},jl={class:"basis-2/5"},Fl={class:"basis-3/5"},Bl={class:"mt-3"},ql={class:"border-2 border-slate-600 border-r-0 border-l-0 border-b-0"},zl={class:"w-full bg-slate-400 px-3 py-1 flex justify-between"},Yl=a("span",null,"HR",-1),Gl={class:"px-3 py-0 flex justify-between space-x-4 pt-4"},Kl={class:"basis-2/6"},Ql={class:"basis-2/6"},Zl={class:"basis-2/6"},Jl={class:"px-3 py-0 flex justify-between space-x-4 pt-4"},Xl={class:"basis-1/2"},eo={class:"basis-1/2"},lo={class:"flex flex-row space-x-4 justify-end mt-2"},oo={class:"w-[120px]"},ao={key:0,class:"w-[180px]"},to={key:1,class:"w-[180px]"},so=le({__name:"EmployeeForm",props:{isModal:{type:[Boolean]},selectedEmployee:{type:Object,required:!0}},emits:["close","save"],setup(Q,{emit:R}){const P=V(),w=R,i=Q,y=oe(),C=Ve(),A=ge(),v=V(!1),I=V(!0),g=V(["Administration","Engineering","Manufacturing","Sales & Marketing"]),D=V([]),t=Z({UniqueID:null,PAYROLLNO:null,payrollnumber:null,SSNO:null,fname:null,mi:null,lname:null,address:null,city:null,state:null,zip:null,HoursPerWeek:null,HourlyWage:null,SECURITYCODE:null,department:null,email:null,SPEMAIL:null,HIREDATE:null,DOB:null,AnnualSalary:null,SpouseName:null,SPWPHONE:null,SPCPHONE:null,homephone:null,cellphone:null,EmployeePicture:null,ACTIVE:null,dateterminated:null,SALARY:null,responsibilities:null,qualifications:null,competencies:null,benefits:null}),_=Z({employeeFiles:null,companyKeys:null,companyExemptions:null,companyCreditCards:null,payrollExemptions:null,payrollStatus:null,payrollAllowances:null,payrollCityTax:null,payrollAW:null,payrollAWD:null}),$=p=>p?new Date(p):new Date,j=async()=>{var p;v.value=!0,await U(`/api/employees/${(p=i==null?void 0:i.selectedEmployee)==null?void 0:p.UniqueID}`,{method:"GET",onResponse({response:o}){if(o.status===200){v.value=!1,I.value=!0;for(const b in o._data.body)o._data.body[b]!==void 0&&(["HIREDATE","DOB","dateterminated"].includes(b)?t[b]=$(o._data.body[b]):t[b]=o._data.body[b])}},onResponseError({}){I.value=!1}}),M(),v.value=!1};function F(p){var b;const o=p.target;(b=o.files)!=null&&b.length&&(t.EmployeePicture=URL.createObjectURL(o.files[0]))}function B(){var p;(p=P.value)==null||p.click()}const M=async()=>{v.value=!0,await U("/api/common/usstates",{method:"GET",onResponse({response:p}){p.status===200&&(D.value=p._data.body)},onResponseError(){D.value=["AL","AK","AZ","AR","CA","CO","CT","DE","FL","GA","HI","ID","IL","IN","IA","KS","KY","LA","ME","MD","MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","OH","OK","OR","PA","RI","SC","SD","TN","TX","UT","VT","VA","WA","WV","WI","WY"]}}),v.value=!1},q=p=>{const o=[];return p.fname||o.push({path:"fname",message:"Please enter your frist name."}),p.lname||o.push({path:"lname",message:"Please enter a your last name."}),p.email||o.push({path:"email",message:"Please enter an email."}),o},W=async()=>{var p;(p=A==null?void 0:A.vnode)!=null&&p.props.onClose?w("close"):C.go(-1)},z=async p=>{i.selectedEmployee===null?await U("/api/employees",{method:"POST",body:p.data,onResponse({response:o}){o.status===200&&y.add({title:"Success",description:o._data.message,icon:"i-heroicons-check-circle",color:"green"})}}):await U(`/api/employees/${i.selectedEmployee.UniqueID}`,{method:"PUT",body:p.data,onResponse({response:o}){o.status===200&&y.add({title:"Success",description:o._data.message,icon:"i-heroicons-check-circle",color:"green"})}}),w("save")},f=[{slot:"companyInfo",label:"Company Info"},{slot:"payroll",label:"Payroll"},{slot:"permission",label:"Permission"}],r=V({customers:{label:"Customers",isChecked:!1},marking:{label:"Marketing",isChecked:!1},employees:{label:"Employees",isChecked:!1},accounting:{label:"Accounting",isChecked:!1},it:{label:"IT",isChecked:!1},engineering:{label:"Engineering",isChecked:!1},materials:{label:"Materials",isChecked:!1},manufacturing:{label:"Manufacturing",isChecked:!1},maintenance:{label:"Maintenance",isChecked:!1},utilities:{label:"Utilities",isChecked:!1},help:{label:"Help",isChecked:!1}}),E=V({isWorkCenterModalOpen:!1,modalTitle:"Work Center",modalDescription:"Work Center Information"}),Y=()=>{E.value.isWorkCenterModalOpen=!0,E.value.modalTitle="Work Center",E.value.modalDescription="Work Center Information"},N=()=>{E.value.isWorkCenterModalOpen=!1};return(i==null?void 0:i.selectedEmployee)!==null?j():M(),(p,o)=>{const b=Ee,x=se,d=ee,c=be,H=Te,S=Re,O=Ie,L=Me,u=We,T=X,ie=Ne,de=ve,ue=He,re=ne;return h(),k(K,null,[a("div",$e,[l(e(Le),{active:e(v),"onUpdate:active":o[0]||(o[0]=s=>ae(v)?v.value=s:null),"is-full-page":!0,color:"#000000",backgroundColor:"#1B2533",loader:"dots"},null,8,["active"])]),l(de,{validate:q,"validate-on":["submit"],state:e(t),class:"space-y-4",onSubmit:z},{default:n(()=>[a("div",je,[a("div",Fe,[a("div",Be,[a("div",qe,[l(d,{name:"EmployeePicture",label:"Employee Picture",class:"gap-2",ui:{container:"flex flex-wrap items-center gap-3",help:"mt-0"}},{default:n(()=>[l(b,{src:e(t).EmployeePicture,alt:"Avatar"},null,8,["src"]),l(x,{label:"Choose",color:"white",size:"sm",onClick:B}),a("input",{ref_key:"fileRef",ref:P,type:"file",class:"hidden",accept:".jpg, .jpeg, .png, .gif",onChange:F},null,544)]),_:1})]),a("div",ze,[l(d,{label:"Payroll(#)",name:"PAYROLLNO"},{default:n(()=>[l(c,{modelValue:e(t).PAYROLLNO,"onUpdate:modelValue":o[1]||(o[1]=s=>e(t).PAYROLLNO=s)},null,8,["modelValue"])]),_:1})]),a("div",Ye,[l(d,{label:"Payroll #(Display)",name:"payrollnumber"},{default:n(()=>[l(c,{modelValue:e(t).payrollnumber,"onUpdate:modelValue":o[2]||(o[2]=s=>e(t).payrollnumber=s)},null,8,["modelValue"])]),_:1})]),a("div",Ge,[l(d,{label:"SS #",name:"SSNO"},{default:n(()=>[l(c,{modelValue:e(t).SSNO,"onUpdate:modelValue":o[3]||(o[3]=s=>e(t).SSNO=s)},null,8,["modelValue"])]),_:1})]),a("div",Ke,[l(d,{label:"First",name:"fname"},{default:n(()=>[l(c,{modelValue:e(t).fname,"onUpdate:modelValue":o[4]||(o[4]=s=>e(t).fname=s)},null,8,["modelValue"])]),_:1})]),a("div",Qe,[l(d,{label:"Middle",name:"mi"},{default:n(()=>[l(c,{modelValue:e(t).mi,"onUpdate:modelValue":o[5]||(o[5]=s=>e(t).mi=s)},null,8,["modelValue"])]),_:1})]),a("div",Ze,[l(d,{label:"Last",name:"lname"},{default:n(()=>[l(c,{modelValue:e(t).lname,"onUpdate:modelValue":o[6]||(o[6]=s=>e(t).lname=s)},null,8,["modelValue"])]),_:1})])]),a("div",Je,[a("div",Xe,[l(d,{label:"Department",name:"department"},{default:n(()=>[l(H,{modelValue:e(t).department,"onUpdate:modelValue":o[7]||(o[7]=s=>e(t).department=s),query:e(t).department,"onUpdate:query":o[8]||(o[8]=s=>e(t).department=s),options:e(g)},null,8,["modelValue","query","options"])]),_:1})]),a("div",el,[l(d,{label:"Employee Email",name:"email"},{default:n(()=>[l(c,{modelValue:e(t).email,"onUpdate:modelValue":o[9]||(o[9]=s=>e(t).email=s)},null,8,["modelValue"])]),_:1})]),a("div",ll,[l(d,{label:"Annual Salary",name:"AnnualSalary"},{default:n(()=>[l(c,{modelValue:e(t).AnnualSalary,"onUpdate:modelValue":o[10]||(o[10]=s=>e(t).AnnualSalary=s)},null,8,["modelValue"])]),_:1})]),a("div",ol,[l(d,{label:"Date Hired",name:"HIREDATE"},{default:n(()=>[l(O,{popper:{placement:"bottom-start"}},{panel:n(({close:s})=>[l(S,{modelValue:e(t).HIREDATE,"onUpdate:modelValue":o[11]||(o[11]=m=>e(t).HIREDATE=m),"is-required":"",onClose:s},null,8,["modelValue","onClose"])]),default:n(()=>[l(x,{icon:"i-heroicons-calendar-days-20-solid",label:e(t).HIREDATE&&e(G)(e(t).HIREDATE,"dd/MM/yyyy"),variant:"outline",ui:{base:"w-full",truncate:"flex justify-center w-full"},truncate:""},null,8,["label"])]),_:1})]),_:1})]),a("div",al,[l(d,{label:"Date of Birth",name:"DOB"},{default:n(()=>[l(O,{popper:{placement:"bottom-start"}},{panel:n(({close:s})=>[l(S,{modelValue:e(t).DOB,"onUpdate:modelValue":o[12]||(o[12]=m=>e(t).DOB=m),"is-required":"",onClose:s},null,8,["modelValue","onClose"])]),default:n(()=>[l(x,{icon:"i-heroicons-calendar-days-20-solid",label:e(t).DOB&&e(G)(e(t).DOB,"dd/MM/yyyy"),variant:"outline",ui:{base:"w-full",truncate:"flex justify-center w-full"},truncate:""},null,8,["label"])]),_:1})]),_:1})]),a("div",tl,[l(d,{label:"Date of Termination",name:"DOB"},{default:n(()=>[l(O,{popper:{placement:"bottom-start"}},{panel:n(({close:s})=>[l(S,{modelValue:e(t).dateterminated,"onUpdate:modelValue":o[13]||(o[13]=m=>e(t).dateterminated=m),"is-required":"",onClose:s},null,8,["modelValue","onClose"])]),default:n(()=>[l(x,{icon:"i-heroicons-calendar-days-20-solid",label:e(t).dateterminated&&e(G)(e(t).dateterminated,"dd/MM/yyyy"),variant:"outline",ui:{base:"w-full",truncate:"flex justify-center w-full"},truncate:""},null,8,["label"])]),_:1})]),_:1})]),a("div",sl,[l(d,{name:"ACTIVE",label:""},{default:n(()=>[l(L,{modelValue:e(t).ACTIVE,"onUpdate:modelValue":o[14]||(o[14]=s=>e(t).ACTIVE=s),name:"ACTIVE",label:"Active",class:"pt-4"},null,8,["modelValue"])]),_:1})])]),nl,a("div",il,[a("div",dl,[a("div",ul,[a("div",rl,[a("div",ml,[l(d,{label:"Address",name:"address"},{default:n(()=>[l(c,{modelValue:e(t).address,"onUpdate:modelValue":o[15]||(o[15]=s=>e(t).address=s),placeholder:"Address"},null,8,["modelValue"])]),_:1})])]),a("div",pl,[a("div",cl,[l(d,{label:"City",name:"city"},{default:n(()=>[l(c,{modelValue:e(t).city,"onUpdate:modelValue":o[16]||(o[16]=s=>e(t).city=s),placeholder:"Dallas"},null,8,["modelValue"])]),_:1})]),a("div",fl,[l(d,{label:"State",name:"state"},{default:n(()=>[l(H,{modelValue:e(t).state,"onUpdate:modelValue":o[17]||(o[17]=s=>e(t).state=s),options:e(D)},null,8,["modelValue","options"])]),_:1})]),a("div",_l,[l(d,{label:"Zip",name:"zip"},{default:n(()=>[l(c,{modelValue:e(t).zip,"onUpdate:modelValue":o[18]||(o[18]=s=>e(t).zip=s),placeholder:"65254"},null,8,["modelValue"])]),_:1})])]),a("div",yl,[a("div",bl,[l(d,{label:"Hours Per Week",name:"HoursPerWeek"},{default:n(()=>[l(c,{modelValue:e(t).HoursPerWeek,"onUpdate:modelValue":o[19]||(o[19]=s=>e(t).HoursPerWeek=s)},null,8,["modelValue"])]),_:1})]),a("div",vl,[l(d,{label:"Hourly Wage",name:"HourlyWage"},{default:n(()=>[l(c,{modelValue:e(t).HourlyWage,"onUpdate:modelValue":o[20]||(o[20]=s=>e(t).HourlyWage=s)},null,8,["modelValue"])]),_:1})])])])]),a("div",Vl,[a("div",xl,[a("div",El,[a("div",gl,[l(d,{label:"Home Phone",name:"homephone"},{default:n(()=>[l(c,{modelValue:e(t).homephone,"onUpdate:modelValue":o[21]||(o[21]=s=>e(t).homephone=s)},null,8,["modelValue"])]),_:1})]),a("div",Cl,[l(d,{label:"Cell Phone",name:"cellphone"},{default:n(()=>[l(c,{modelValue:e(t).cellphone,"onUpdate:modelValue":o[22]||(o[22]=s=>e(t).cellphone=s)},null,8,["modelValue"])]),_:1})])]),a("div",hl,[a("div",kl,[l(d,{label:"Spouse Name",name:"SpouseName"},{default:n(()=>[l(c,{modelValue:e(t).SpouseName,"onUpdate:modelValue":o[23]||(o[23]=s=>e(t).SpouseName=s)},null,8,["modelValue"])]),_:1})]),a("div",wl,[l(d,{label:"Spouse Email",name:"SPEMAIL"},{default:n(()=>[l(c,{modelValue:e(t).SPEMAIL,"onUpdate:modelValue":o[24]||(o[24]=s=>e(t).SPEMAIL=s)},null,8,["modelValue"])]),_:1})])]),a("div",Ul,[a("div",Al,[l(d,{label:"Spouse Work Phone",name:"SPWPHONE"},{default:n(()=>[l(c,{modelValue:e(t).SPWPHONE,"onUpdate:modelValue":o[25]||(o[25]=s=>e(t).SPWPHONE=s)},null,8,["modelValue"])]),_:1})]),a("div",Dl,[l(d,{label:"Spouse Cell Phone",name:"SPCPHONE"},{default:n(()=>[l(c,{modelValue:e(t).SPCPHONE,"onUpdate:modelValue":o[26]||(o[26]=s=>e(t).SPCPHONE=s)},null,8,["modelValue"])]),_:1})])])])])])]),a("div",Sl,[l(ie,{items:f,class:"w-full"},{companyInfo:n(({item:s})=>[a("div",Ol,[l(d,{label:"Employee Files",name:"employeeFiles"},{default:n(()=>[l(c,{modelValue:e(_).employeeFiles,"onUpdate:modelValue":o[27]||(o[27]=m=>e(_).employeeFiles=m)},null,8,["modelValue"])]),_:1})]),Tl,a("div",Pl,[a("div",Il,[l(d,{label:"Company Keys",name:"companyKeys"},{default:n(()=>[l(c,{modelValue:e(_).companyKeys,"onUpdate:modelValue":o[28]||(o[28]=m=>e(_).companyKeys=m)},null,8,["modelValue"])]),_:1})]),a("div",Ml,[l(d,{label:"Exemptions",name:"companyExemptions"},{default:n(()=>[l(c,{modelValue:e(_).companyExemptions,"onUpdate:modelValue":o[29]||(o[29]=m=>e(_).companyExemptions=m)},null,8,["modelValue"])]),_:1})])]),a("div",Wl,[l(d,{label:"Company Credit Cards",name:"companyCreditCards"},{default:n(()=>[l(u,{modelValue:e(_).companyCreditCards,"onUpdate:modelValue":o[30]||(o[30]=m=>e(_).companyCreditCards=m),rows:4,type:"text"},null,8,["modelValue"])]),_:1})])]),payroll:n(({item:s})=>[a("div",Nl,[a("div",Hl,[l(d,{label:"Exemptions",name:"payrollExemptions"},{default:n(()=>[l(T,{modelValue:e(_).payrollExemptions,"onUpdate:modelValue":o[31]||(o[31]=m=>e(_).payrollExemptions=m),options:[]},null,8,["modelValue"])]),_:1})]),a("div",Ll,[l(d,{label:"Status",name:"payrollStatus"},{default:n(()=>[l(T,{modelValue:e(_).payrollStatus,"onUpdate:modelValue":o[32]||(o[32]=m=>e(_).payrollStatus=m),options:[]},null,8,["modelValue"])]),_:1})]),a("div",Rl,[l(d,{label:"Allowances",name:"payrollAllowances"},{default:n(()=>[l(c,{modelValue:e(_).payrollAllowances,"onUpdate:modelValue":o[33]||(o[33]=m=>e(_).payrollAllowances=m)},null,8,["modelValue"])]),_:1})])]),a("div",$l,[a("div",jl,[l(d,{label:"City Tax",name:"payrollCityTax"},{default:n(()=>[l(T,{modelValue:e(_).payrollCityTax,"onUpdate:modelValue":o[34]||(o[34]=m=>e(_).payrollCityTax=m),options:[]},null,8,["modelValue"])]),_:1})]),a("div",Fl,[l(d,{label:"Additional Witholding",name:"payrollAW"},{default:n(()=>[l(c,{modelValue:e(_).payrollAW,"onUpdate:modelValue":o[35]||(o[35]=m=>e(_).payrollAW=m)},null,8,["modelValue"])]),_:1})])]),a("div",Bl,[l(d,{label:"Additional Withholding Description",name:"payrollAWD"},{default:n(()=>[l(c,{modelValue:e(_).payrollAWD,"onUpdate:modelValue":o[36]||(o[36]=m=>e(_).payrollAWD=m)},null,8,["modelValue"])]),_:1})])]),permission:n(({item:s})=>[(h(!0),k(K,null,te(e(r),(m,me)=>(h(),k("div",{key:me,class:"basis-1/5 pb-1.5"},[l(L,{modelValue:m.isChecked,"onUpdate:modelValue":pe=>m.isChecked=pe,label:m.label},null,8,["modelValue","onUpdate:modelValue","label"])]))),128))]),_:1})])]),a("div",ql,[a("div",zl,[Yl,l(x,{icon:"i-heroicons-eye",color:"gray",label:"Work Center Information",ui:{base:"w-fit",truncate:"flex justify-center w-full"},onClick:Y,truncate:""})]),a("div",Gl,[a("div",Kl,[l(d,{label:"Salary History",name:"SALARY"},{default:n(()=>[l(u,{modelValue:e(t).SALARY,"onUpdate:modelValue":o[37]||(o[37]=s=>e(t).SALARY=s),rows:4,type:"text"},null,8,["modelValue"])]),_:1})]),a("div",Ql,[l(d,{label:"Responsibilites",name:"responsibilities"},{default:n(()=>[l(u,{modelValue:e(t).responsibilities,"onUpdate:modelValue":o[38]||(o[38]=s=>e(t).responsibilities=s),rows:4,type:"text"},null,8,["modelValue"])]),_:1})]),a("div",Zl,[l(d,{label:"Qualifications",name:"qualifications"},{default:n(()=>[l(u,{modelValue:e(t).qualifications,"onUpdate:modelValue":o[39]||(o[39]=s=>e(t).qualifications=s),rows:4,type:"text"},null,8,["modelValue"])]),_:1})])]),a("div",Jl,[a("div",Xl,[l(d,{label:"Competencies",name:"competencies"},{default:n(()=>[l(u,{modelValue:e(t).competencies,"onUpdate:modelValue":o[40]||(o[40]=s=>e(t).competencies=s),rows:4,type:"text"},null,8,["modelValue"])]),_:1})]),a("div",eo,[l(d,{label:"Benefits",name:"benefits"},{default:n(()=>[l(u,{modelValue:e(t).benefits,"onUpdate:modelValue":o[41]||(o[41]=s=>e(t).benefits=s),rows:4,type:"text"},null,8,["modelValue"])]),_:1})])])]),a("div",lo,[a("div",oo,[l(x,{variant:"outline",color:"red",label:"Cancel",ui:{base:"w-full",truncate:"flex justify-center w-full"},onClick:W,truncate:""})]),i.selectedEmployee===null?(h(),k("div",ao,[l(x,{icon:"i-heroicons-plus-20-solid",type:"submit",variant:"outline",color:"green",label:"Add Employee",ui:{base:"w-full",truncate:"flex justify-center w-full"},truncate:""})])):(h(),k("div",to,[l(x,{icon:"i-heroicons-plus-20-solid",type:"submit",variant:"outline",color:"blue",label:"Modify Employee",ui:{base:"w-full",truncate:"flex justify-center w-full"},truncate:""})]))])]),_:1},8,["state"]),l(re,{modelValue:e(E).isWorkCenterModalOpen,"onUpdate:modelValue":o[42]||(o[42]=s=>e(E).isWorkCenterModalOpen=s),title:e(E).modalTitle,description:e(E).modalDescription,ui:{width:"[w-800px] sm:max-w-5xl",body:{padding:"py-0 sm:pt-0"}}},{default:n(()=>[l(ue,{"selected-employee":i.selectedEmployee,onClose:N},null,8,["selected-employee"])]),_:1},8,["modelValue","title","description"])],64)}}}),no=a("div",{class:"px-4 py-2 gmsTealTitlebar"},[a("h2",null,"Sorting")],-1),io={class:"flex flex-row space-x-3 ml-5"},uo={class:"basis-1/7 max-w-[200px]"},ro={class:"text-center text-bold"},mo=a("div",{class:"px-4 py-2 gmsTealTitlebar"},[a("h2",null,"Lookup")],-1),po={key:0,class:"px-4 py-3.5"},co={key:1,class:"flex justify-center text-center w-[53px]"},fo={class:"border-t-[1px] border-gray-200 mb-1 dark:border-gray-800"},_o={class:"flex flex-row justify-end mr-20 mt-1"},yo="i-heroicons-bars-arrow-up-20-solid",bo="i-heroicons-bars-arrow-down-20-solid",vo="i-heroicons-arrows-up-down-20-solid",$o=le({__name:"list",setup(Q){Ce(()=>{I()}),he({title:"Grimm-Employees List"});const R=ke(),P=oe(),w=V("Active"),i=V({defaultColumns:[{key:"payrollno",label:"Payroll #",sortable:!0,sortDirection:"none",filterable:!0},{key:"fname",label:"First",sortable:!0,sortDirection:"none",filterable:!0},{key:"lname",label:"Last",sortable:!0,sortDirection:"none",filterable:!0},{key:"address",label:"Address",sortable:!0,sortDirection:"none",filterable:!0},{key:"city",label:"City",sortable:!0,sortDirection:"none",filterable:!0},{key:"state",label:"State",sortable:!0,sortDirection:"none",filterable:!0},{key:"zip",label:"Zip",sortable:!0,sortDirection:"none",filterable:!0},{key:"homephone",label:"Home Cell Phone",sortable:!0,sortDirection:"none",filterable:!0},{key:"edit",label:"Edit",kind:"actions"},{key:"delete",label:"Delete",kind:"actions"}],page:1,pageSize:50,numberOfEmployee:0,employess:[],selectedEmpployee:null,sort:{column:"UniqueID",direction:"asc"},isLoading:!1}),y=V({isEmployeeModalOpen:!1,modalTitle:"New Employee",modalDescription:"Add a new Employee"}),C=V({ACTIVE:"1",payrollno:null,fname:null,lname:null,address:null,city:null,state:null,zip:null,homephone:null}),A=V(i.value.defaultColumns),v=we(()=>i.value.defaultColumns.filter(f=>A.value.includes(f)));Object.entries(R.query).forEach(([f,r])=>{switch(f.toLowerCase()){case"page":i.value.page=Number(r);break;case"pagesize":i.value.pageSize=Number(r);break;case"sortby":i.value.sort.column=r;break;case"sortorder":i.value.sort.direction=r;break}});const I=async()=>{g()},g=async()=>{if(i.value.isLoading=!0,await U("/api/employees/numbers",{method:"GET",params:{...C.value},onResponse({response:f}){f.status===200&&(i.value.numberOfEmployee=f._data.body)}}),i.value.numberOfEmployee===0){i.value.employess=[],i.value.numberOfEmployee=0,i.value.isLoading=!1;return}i.value.page*i.value.pageSize>i.value.numberOfEmployee&&(i.value.page=Math.ceil(i.value.numberOfEmployee/i.value.pageSize)|1),await U("/api/employees",{method:"GET",params:{page:i.value.page,pageSize:i.value.pageSize,sortBy:i.value.sort.column,sortOrder:i.value.sort.direction,...C.value},onResponse({response:f}){f.status===200&&(i.value.employess=f._data.body),i.value.isLoading=!1}})},D=()=>{w.value==="Active"?C.value.ACTIVE="1":C.value.ACTIVE="0",g()},t=async()=>{g()},_=()=>{i.value.selectedEmpployee=null,y.value.modalTitle="New Employee",y.value.modalDescription="Add a new employee",y.value.isEmployeeModalOpen=!0},$=f=>{i.value.selectedEmpployee=f,y.value.modalTitle="Edit",y.value.modalDescription="Edit Employee information",y.value.isEmployeeModalOpen=!0},j=async f=>{i.value.selectedEmpployee=f},F=async()=>{i.value.selectedEmpployee&&(y.value.modalTitle="Edit",y.value.modalDescription="Edit Employee information",y.value.isEmployeeModalOpen=!0)},B=async f=>{await U(`/api/employees/${f==null?void 0:f.UniqueID}`,{method:"DELETE",onResponse({response:r}){r.status===200&&(P.add({title:"Success",description:r._data.message,icon:"i-heroicons-trash-solid",color:"green"}),g())}})},M=async f=>{i.value.page=1;for(const r of v.value)if(r.sortable)if(r.key===f)switch(r.sortDirection){case"none":r.sortDirection="asc",i.value.sort.column=f,i.value.sort.direction="asc";break;case"asc":r.sortDirection="desc",i.value.sort.column=f,i.value.sort.direction="desc";break;default:r.sortDirection="none",i.value.sort.column="UniqueID",i.value.sort.direction="asc";break}else r.sortDirection="none";g()},q=async(f,r)=>{i.value.page=1,C.value.hasOwnProperty(r)?C.value[r]=f:console.error(`Filter does not have property: ${r}`),g()},W=()=>{y.value.isEmployeeModalOpen=!1},z=async()=>{W(),g()};return(f,r)=>{const E=ce,Y=X,N=ee,p=se,o=Ae,b=_e,x=De,d=ye,c=Se,H=fe,S=Oe,O=so,L=ne;return h(),k(K,null,[l(S,null,{default:n(()=>[l(H,{grow:""},{default:n(()=>[l(E,{class:"gmsTealHeader",title:"Employee List"}),no,l(o,{class:"gmsTealToolbar"},{left:n(()=>[l(N,{label:"Employee Status",name:"state"},{default:n(()=>[l(Y,{modelValue:e(w),"onUpdate:modelValue":r[0]||(r[0]=u=>ae(w)?w.value=u:null),options:["Active","Inactive"],onChange:D,searchable:"false"},null,8,["modelValue"])]),_:1}),a("div",io,[a("div",uo,[l(N,{label:"Quantity",name:"Quantity"},{default:n(()=>[a("div",ro,J(e(i).numberOfEmployee),1)]),_:1})])])]),right:n(()=>[l(p,{variant:"outline",label:"New Employee",class:"bg-gmsTealHeader","trailing-icon":"i-heroicons-plus",onClick:r[1]||(r[1]=u=>_())})]),_:1}),mo,l(d,{rows:e(i).employess,columns:e(v),loading:e(i).isLoading,class:"w-full",ui:{divide:"divide-gray-200 dark:divide-gray-800",th:{base:"sticky top-0 z-10",color:"bg-white dark:text-gray dark:bg-[#111827]",padding:"p-0"},td:{padding:"py-1"}},"empty-state":{icon:"i-heroicons-circle-stack-20-solid",label:"No items."},onSelect:j,onDblclick:F},Ue({"edit-data":n(({row:u})=>[l(x,{text:"Edit",class:"flex justify-center"},{default:n(()=>[l(p,{color:"gray",variant:"ghost",icon:"i-heroicons-pencil-square",onClick:T=>$(u)},null,8,["onClick"])]),_:2},1024)]),"delete-data":n(({row:u})=>[l(x,{text:"Delete",class:"flex justify-center"},{default:n(()=>[l(p,{color:"gray",variant:"ghost",icon:"i-heroicons-trash",onClick:T=>B(u)},null,8,["onClick"])]),_:2},1024)]),_:2},[te(e(v),u=>({name:`${u.key}-header`,fn:n(()=>[u.kind!=="actions"?(h(),k("div",po,[l(b,{onHandleSortingButton:M,onHandleInputChange:q,label:u.label,sortable:u.sortable,"sort-key":u.key,"sort-icon":(u==null?void 0:u.sortDirection)==="none"?vo:(u==null?void 0:u.sortDirection)==="asc"?yo:bo,filterable:u.filterable,"filter-key":u.key},null,8,["label","sortable","sort-key","sort-icon","filterable","filter-key"])])):(h(),k("div",co,J(u.label),1))])}))]),1032,["rows","columns","loading"]),a("div",fo,[a("div",_o,[l(c,{max:7,"page-count":e(i).pageSize,total:e(i).numberOfEmployee||0,modelValue:e(i).page,"onUpdate:modelValue":[r[2]||(r[2]=u=>e(i).page=u),r[3]||(r[3]=u=>t())]},null,8,["page-count","total","modelValue"])])])]),_:1})]),_:1}),l(L,{modelValue:e(y).isEmployeeModalOpen,"onUpdate:modelValue":r[4]||(r[4]=u=>e(y).isEmployeeModalOpen=u),title:e(y).modalTitle,description:e(y).modalDescription,ui:{title:"text-lg",header:{base:"flex flex-row min-h-[0] items-center",padding:"pt-5 sm:px-9"},body:{base:"gap-y-1",padding:"sm:pt-0 sm:px-9 sm:py-3 sm:pb-5"},width:"w-[1600px] sm:max-w-8xl"}},{default:n(()=>[l(O,{onClose:W,onSave:z,"selected-employee":e(i).selectedEmpployee,"is-modal":!0},null,8,["selected-employee"])]),_:1},8,["modelValue","title","description"])],64)}}});export{$o as default};
